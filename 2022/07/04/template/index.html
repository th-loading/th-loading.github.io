

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/images/icon.png">
  <link rel="icon" href="/images/icon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="th-loading">
  <meta name="keywords" content="">
  <meta name="description" content="模板 位置关系 相对位置 1234567891011121314151617181920212223242526vi id(n), rid(n);&#x2F;&#x2F; 当前数组的id对应的变换数组的id&#x2F;&#x2F; id[x] &#x3D; T_x;&#x2F;&#x2F; id[x]返回当前id对应的原id 1. 可用于改变原数列的值 2. 访问原序列的值 rep (i, 0, n) id[i] &#x3D; i;&#x2F;&#x2F; 变换数组当前的id对应的原数组的id&#x2F;">
<meta property="og:type" content="article">
<meta property="og:title" content="算法基本模板">
<meta property="og:url" content="http://example.com/2022/07/04/template/index.html">
<meta property="og:site_name" content="loading">
<meta property="og:description" content="模板 位置关系 相对位置 1234567891011121314151617181920212223242526vi id(n), rid(n);&#x2F;&#x2F; 当前数组的id对应的变换数组的id&#x2F;&#x2F; id[x] &#x3D; T_x;&#x2F;&#x2F; id[x]返回当前id对应的原id 1. 可用于改变原数列的值 2. 访问原序列的值 rep (i, 0, n) id[i] &#x3D; i;&#x2F;&#x2F; 变换数组当前的id对应的原数组的id&#x2F;">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/images/swap-1.png">
<meta property="og:image" content="http://example.com/images/swap-2.png">
<meta property="og:image" content="http://example.com/images/circle-1.png">
<meta property="og:image" content="http://example.com/images/game-1.png">
<meta property="og:image" content="http://example.com/images/error.png">
<meta property="og:image" content="http://example.com/images/mod-1.png">
<meta property="og:image" content="http://example.com/images/mod-2.png">
<meta property="og:image" content="http://example.com/images/mod-3.png">
<meta property="og:image" content="http://example.com/images/mod-4.png">
<meta property="og:image" content="http://example.com/images/factor-1.png">
<meta property="og:image" content="http://example.com/images/binary-1.png">
<meta property="og:image" content="http://example.com/images/greedy01.png">
<meta property="og:image" content="http://example.com/images/bit-1.png">
<meta property="og:image" content="http://example.com/images/information-1.png">
<meta property="article:published_time" content="2022-07-04T03:51:49.000Z">
<meta property="article:modified_time" content="2023-09-19T12:04:21.712Z">
<meta property="article:author" content="th-loading">
<meta property="article:tag" content="Algorithm">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://example.com/images/swap-1.png">
  
  <title>算法基本模板 - loading</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.css" />
  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.8.12","typing":{"enable":false,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname"}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>loading</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/images/tb.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="算法基本模板">
              
                算法基本模板
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2022-07-04 11:51" pubdate>
        2022年7月4日 中午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      44k 字
    </span>
  

  
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      137 分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">算法基本模板</h1>
            
            <div class="markdown-body">
              <h1 id="模板">模板</h1>
<h2 id="位置关系">位置关系</h2>
<h3 id="相对位置">相对位置</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function">vi <span class="hljs-title">id</span><span class="hljs-params">(n)</span>, <span class="hljs-title">rid</span><span class="hljs-params">(n)</span></span>;<br><br><span class="hljs-comment">// 当前数组的id对应的变换数组的id</span><br><span class="hljs-comment">// id[x] = T_x;</span><br><span class="hljs-comment">// id[x]返回当前id对应的原id 1. 可用于改变原数列的值 2. 访问原序列的值 </span><br><span class="hljs-built_in">rep</span> (i, <span class="hljs-number">0</span>, n) id[i] = i;<br><br><span class="hljs-comment">// 变换数组当前的id对应的原数组的id</span><br><span class="hljs-comment">// rid[id[x]] = x (rid[T_x] = x) </span><br><span class="hljs-comment">// 通常直接使用原数组 + id 表示 Tarr 所以通常不需要</span><br><br><span class="hljs-comment">// 记录T变换后id的映射 后 - 前</span><br><span class="hljs-built_in">rotate</span>(id.<span class="hljs-built_in">begin</span>(), id.<span class="hljs-built_in">begin</span>() + x, id.<span class="hljs-built_in">end</span>());<br><span class="hljs-comment">// sort </span><br><span class="hljs-built_in">sort</span>(<span class="hljs-built_in">all</span>(id), [](<span class="hljs-keyword">auto</span> &amp;a, <span class="hljs-keyword">auto</span> &amp;b) &#123;<br>    <span class="hljs-keyword">return</span> g[a] &lt; g[b];<br>&#125;);<br><span class="hljs-comment">// 0 -&gt; pos + i</span><br><span class="hljs-built_in">rep</span> (i, <span class="hljs-number">0</span>, n) &#123;<br>	id[i] = (pos + i) % <span class="hljs-number">3</span>;    <br>&#125;<br><br><span class="hljs-comment">// 按原id输出</span><br>vv[id[<span class="hljs-number">0</span>]] = v[id[<span class="hljs-number">0</span>]];<br>vv[id[<span class="hljs-number">2</span>]] = v[id[<span class="hljs-number">2</span>]] + v[id[<span class="hljs-number">0</span>]];<br>vv[id[<span class="hljs-number">1</span>]] = <span class="hljs-built_in">accumulate</span>(<span class="hljs-built_in">all</span>(v), <span class="hljs-number">0</span>);<br></code></pre></td></tr></table></figure>
<h3 id="排列">排列</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 若只能交换一次</span><br><span class="hljs-comment">// 1 2 2 3 4 5 6</span><br><span class="hljs-comment">// 直接比较原来的排列</span><br><span class="hljs-comment">// 1 3 2 2 4 5 6</span><br><span class="hljs-comment">// 一定代表着不同的部分</span><br></code></pre></td></tr></table></figure>
<h3 id="判断个数距离">判断个数/距离</h3>
<p>转换区间: (i, n) 的个数 -&gt; [i + 1, n - 1] == b - a + 1</p>
<p>转换坐标 逆序坐标 x -&gt; 正序坐标 n - x + 1</p>
<p>while if (match) j++ : (i, j)</p>
<p>注意 for(;;j++) x for(;;)</p>
<h2 id="sort">Sort</h2>
<p>topk 问题</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// c++ greater means different sort 从大到小， priority 小顶堆</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">btmp</span>&#123;<br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">const</span> pis &amp;a, <span class="hljs-type">const</span> pis &amp;b)</span></span>&#123;<br>        <span class="hljs-keyword">if</span>(a.first &lt; b.first) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a.first &gt; b.first) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-keyword">else</span>&#123;<br>            <span class="hljs-keyword">if</span>(a.second &gt; b.second) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>
<h3 id="quicksort">quicksort</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">partition</span><span class="hljs-params">(<span class="hljs-type">int</span> arr[], <span class="hljs-type">int</span> low, <span class="hljs-type">int</span> high)</span></span><br><span class="hljs-function"></span>&#123;<br>	<span class="hljs-type">int</span> pivot = arr[high];<br>	<span class="hljs-type">int</span> i = (low - <span class="hljs-number">1</span>);<br><br>	<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = low; j &lt;= high - <span class="hljs-number">1</span>; j++)<br>	&#123;<br>		<span class="hljs-keyword">if</span> (arr[j] &lt;= pivot) &#123;<br>			i++;<br>			<span class="hljs-built_in">swap</span>(arr[i], arr[j]);<br>		&#125;<br>	&#125;<br>    <span class="hljs-comment">// 替换到交界的位置 </span><br>	<span class="hljs-built_in">swap</span>(arr[i + <span class="hljs-number">1</span>], arr[high]);<br>	<span class="hljs-keyword">return</span> (i + <span class="hljs-number">1</span>);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">partition_r</span><span class="hljs-params">(<span class="hljs-type">int</span> arr[], <span class="hljs-type">int</span> low, <span class="hljs-type">int</span> high)</span></span><br><span class="hljs-function"></span>&#123;<br>	<span class="hljs-built_in">srand</span>(<span class="hljs-built_in">time</span>(<span class="hljs-literal">NULL</span>));<br>	<span class="hljs-type">int</span> random = low + <span class="hljs-built_in">rand</span>() % (high - low);<br>    <span class="hljs-comment">// 与最高位交换即可</span><br>	<span class="hljs-built_in">swap</span>(arr[random], arr[high]);<br>	<span class="hljs-keyword">return</span> <span class="hljs-built_in">partition</span>(arr, low, high);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">quickSort</span><span class="hljs-params">(<span class="hljs-type">int</span> arr[], <span class="hljs-type">int</span> low, <span class="hljs-type">int</span> high)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">// 拆分问题</span><br>	<span class="hljs-keyword">if</span> (low &lt; high) &#123;<br>		<span class="hljs-comment">// 排序</span><br>        <span class="hljs-type">int</span> pi = <span class="hljs-built_in">partition_r</span>(arr, low, high);<br>		<span class="hljs-built_in">quickSort</span>(arr, low, pi - <span class="hljs-number">1</span>);<br>		<span class="hljs-built_in">quickSort</span>(arr, pi + <span class="hljs-number">1</span>, high);<br>	&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<h3 id="midsort">midsort</h3>
<p>逆序对问题</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 归并 </span><br><span class="hljs-comment">// low + (high - low + 1) / 2</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">mergeSort</span><span class="hljs-params">(<span class="hljs-type">int</span> arr[], <span class="hljs-type">int</span> L, <span class="hljs-type">int</span> R)</span> </span>&#123;<br>	<span class="hljs-keyword">if</span> (L == R)&#123;<br>		<span class="hljs-keyword">return</span>;<br>	&#125; <span class="hljs-keyword">else</span> &#123;<br>		<span class="hljs-type">int</span> M = (L + R) / <span class="hljs-number">2</span>;<br>		<span class="hljs-built_in">mergeSort</span>(arr, L, M);<br>		<span class="hljs-built_in">mergeSort</span>(arr, M + <span class="hljs-number">1</span>, R);<br>		<span class="hljs-built_in">merge</span>(arr, L, M + <span class="hljs-number">1</span>, R);<br>    &#125;<br>&#125;<br><span class="hljs-comment">// create left arr </span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> l = mid - left + <span class="hljs-number">1</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> r = right - mid;<br><span class="hljs-comment">// Create temp arrays</span><br><span class="hljs-type">int</span> *left = <span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[l],<br>	*right = <span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[r];<br><span class="hljs-comment">// combine arrs</span><br><span class="hljs-type">int</span> ll = <span class="hljs-number">0</span>, rr = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">while</span> (ll &lt; l &amp;&amp; rr &lt; r);<br><span class="hljs-comment">// 防止遗漏</span><br><span class="hljs-keyword">while</span> (ll &lt; l) <span class="hljs-keyword">while</span>(rr &lt; r);<br></code></pre></td></tr></table></figure>
<h3 id="heapsort">heapsort</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">heapify</span><span class="hljs-params">(<span class="hljs-type">int</span> size, <span class="hljs-type">int</span> i)</span></span>&#123;<br>	<span class="hljs-comment">// 最后一个非叶子节点的位置 2x -&gt; 左节点 2x+1 -&gt; 右节点</span><br>	<span class="hljs-type">int</span> l = <span class="hljs-number">2</span> * i + <span class="hljs-number">1</span>; <br>    <span class="hljs-type">int</span> r = <span class="hljs-number">2</span> * i + <span class="hljs-number">2</span>;<br>    <span class="hljs-type">int</span> largest = i;<br>    <span class="hljs-keyword">if</span> (l &lt; size &amp;&amp; hT[l] &gt; hT[largest])<br>		largest = l;<br>	<span class="hljs-keyword">if</span> (r &lt; size &amp;&amp; hT[r] &gt; hT[largest])<br>		largest = r;<br>	<span class="hljs-keyword">if</span> (largest != i) &#123;<br>        <span class="hljs-comment">// 自顶而下调整</span><br>        <span class="hljs-built_in">swap</span>(&amp;hT[i], &amp;hT[largest]);<br>		<span class="hljs-built_in">heapify</span>(size, largest);<br>  	&#125;<br>&#125;<br><span class="hljs-comment">// heap sort 堆顶替换，重建堆</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">heapSort</span><span class="hljs-params">(<span class="hljs-type">int</span> size)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">// 建堆（从最后一个非叶子节点向上）</span><br>    <span class="hljs-comment">// size 2n + 2 / 2n + 3</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = size / <span class="hljs-number">2</span> - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>        <span class="hljs-built_in">heapify</span>(size, i);<br>    &#125;<br>    <span class="hljs-comment">// 堆排序</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = size - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">1</span>; i--) &#123;<br>        <span class="hljs-comment">// 将当前最大的放置到数组末尾</span><br>        <span class="hljs-built_in">swap</span>(arr[<span class="hljs-number">0</span>], arr[i]);<br>        <span class="hljs-comment">// 将未完成排序的部分继续进行堆排序</span><br>        <span class="hljs-built_in">heapify</span>(i, <span class="hljs-number">0</span>);             <br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="插入排序">插入排序</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 部分sort</span><br><span class="hljs-comment">// 注意n - 1次</span><br></code></pre></td></tr></table></figure>
<h3 id="基数排序">基数排序</h3>
<p>radix sort</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 先解决子问题 个位数的排序问题</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">countSort</span><span class="hljs-params">(<span class="hljs-type">int</span> arr[], <span class="hljs-type">int</span> n, <span class="hljs-type">int</span> exp)</span> </span>&#123;<br>    <span class="hljs-type">int</span> output[n]; <br>    <span class="hljs-type">int</span> i, count[<span class="hljs-number">10</span>] = &#123;<span class="hljs-number">0</span>&#125;;<br> <br>    <span class="hljs-comment">// 基于每个位数的分布</span><br>    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; n; i++)<br>        count[(arr[i] / exp) % <span class="hljs-number">10</span>]++;<br> 	<br>    <span class="hljs-comment">// 真实的位置映射</span><br>    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>        count[i] += count[i - <span class="hljs-number">1</span>];<br><br>    <span class="hljs-comment">// 按顺序赋值</span><br>    <span class="hljs-keyword">for</span> (i = n - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>        output[count[(arr[i] / exp) % <span class="hljs-number">10</span>] - <span class="hljs-number">1</span>] = arr[i];<br>        count[(arr[i] / exp) % <span class="hljs-number">10</span>]--;<br>    &#125;<br><br>    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; n; i++)<br>        arr[i] = output[i];<br>&#125;<br><br><span class="hljs-comment">// Radix Sort</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">radixsort</span><span class="hljs-params">(<span class="hljs-type">int</span> arr[], <span class="hljs-type">int</span> n)</span> </span>&#123;<br>	<span class="hljs-type">int</span> m = *<span class="hljs-built_in">max_element</span>(arr, arr + n);<br>    <span class="hljs-comment">// 枚举每一位的顺序</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> exp = <span class="hljs-number">1</span>; m / exp &gt; <span class="hljs-number">0</span>; exp *= <span class="hljs-number">10</span>)<br>        <span class="hljs-built_in">countSort</span>(arr, n, exp);<br>&#125; <br></code></pre></td></tr></table></figure>
<h3 id="bubble-sort">bubble sort</h3>
<p>number of inversion pairs 排序过程，每次纠正逆序对 in-place 原地排序
直到没有 线段树计算逆序对，贪心构造最大逆序对</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function">vi <span class="hljs-title">bubbleSort</span><span class="hljs-params">(vi &amp;arr)</span> </span>&#123;<br>     <span class="hljs-keyword">if</span> (<span class="hljs-built_in">sz</span>(arr) &lt;= <span class="hljs-number">1</span>) &#123;<br>          <span class="hljs-keyword">return</span> arr;<br>     &#125;<br>    <br>    <span class="hljs-comment">//记录最后一次交换的位置</span><br>    <span class="hljs-type">int</span> lastExchangeIndex = <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">// 无序数列的边界，每次比较只需要比到这里为止</span><br>    <span class="hljs-type">int</span> sortBorder = <span class="hljs-built_in">sz</span>(arr) - <span class="hljs-number">1</span>;<br>    <br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; arr.length - <span class="hljs-number">1</span>; i++) &#123;<br>         <span class="hljs-type">bool</span> isSorted  = <span class="hljs-literal">true</span>; <span class="hljs-comment">//有序标记，每一轮的初始是true</span><br>         <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; sortBorder; j++) &#123;<br>             <span class="hljs-keyword">if</span> (arr[j + <span class="hljs-number">1</span>] &lt; arr[j]) &#123;<br>                 isSorted  = <span class="hljs-literal">false</span>; <span class="hljs-comment">//有元素交换，所以不是有序，标记变为false</span><br>                 <span class="hljs-type">int</span> t = arr[j];<br>                 <span class="hljs-built_in">swap</span>(arr[j], arr[j + <span class="hljs-number">1</span>]);<br>                 lastExchangeIndex = j;<br>             &#125;<br>         &#125;<br>		 sortBorder = lastExchangeIndex;<br>         <span class="hljs-comment">//一趟下来是否发生位置交换，如果没有交换直接跳出大循环</span><br>         <span class="hljs-keyword">if</span>(isSorted)<br>              <span class="hljs-keyword">break</span>;<br>     &#125;<br>     <span class="hljs-keyword">return</span> arr;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="选择排序">选择排序</h3>
<p>每次遍历选择一位，最大位 swap</p>
<h3 id="cycle-sort">cycle sort</h3>
<p>swap cycle</p>
<p><a
target="_blank" rel="noopener" href="https://blog.csdn.net/yunxiaoqinghe/article/details/113153795">交换次数</a></p>
<p><img src="/images/swap-1.png" srcset="/img/loading.gif" lazyload alt="swap" style="zoom: 67%;" /></p>
<p>若存在一个圈有两个相同的值，可以通关交换增加环的个数 <a
target="_blank" rel="noopener" href="https://www.cnblogs.com/kkun/archive/2011/11/28/2266559.html">圈排序</a>
不断寻找直到遇到需要替换到原来位置的元素</p>
<p>补充说明： ？是否一定成环 - ? 可能提前成环 a-&gt;b-&gt;c-&gt;b
随便搜索可能找不到一个可以回到A的回路 b-&gt;c-&gt;b
作为一个子环。a-&gt;b-&gt;d-&gt;a 才是真实的环 -&gt; 至多搜索6次 -&gt;
不能直接删除, 找到环后结束搜索。 链越短越好?</p>
<p><img src="/images/swap-2.png" srcset="/img/loading.gif" lazyload alt="image-20220426173644799" style="zoom:67%;" /></p>
<h3 id="计数排序">计数排序</h3>
<p>利用大空间，直接存储到值对应的位置，顺序输出。</p>
<h2 id="结构">结构</h2>
<h3 id="双向链表">双向链表</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 直接调用</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TextEditor</span> &#123;<br>    list&lt;<span class="hljs-type">char</span>&gt; lst;<br>    list&lt;<span class="hljs-type">char</span>&gt;::iterator cur;<br><br>    <span class="hljs-function">string <span class="hljs-title">print</span><span class="hljs-params">()</span> </span>&#123;<br>        string ret;<br>        <span class="hljs-keyword">auto</span> it = cur;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123;<br>            <span class="hljs-keyword">if</span> (it == lst.<span class="hljs-built_in">begin</span>()) <span class="hljs-keyword">break</span>;<br>            it = <span class="hljs-built_in">prev</span>(it);<br>            ret.<span class="hljs-built_in">push_back</span>(*it);<br>        &#125;<br>        <span class="hljs-built_in">reverse</span>(ret.<span class="hljs-built_in">begin</span>(), ret.<span class="hljs-built_in">end</span>());<br>        <span class="hljs-keyword">return</span> ret;<br>    &#125;<br><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">TextEditor</span>() &#123;<br>        cur = lst.<span class="hljs-built_in">begin</span>();<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">addText</span><span class="hljs-params">(string text)</span> </span>&#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">char</span> c : text) lst.<span class="hljs-built_in">insert</span>(cur, c);<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">deleteText</span><span class="hljs-params">(<span class="hljs-type">int</span> k)</span> </span>&#123;<br>        <span class="hljs-type">int</span> ret = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span> (k &amp;&amp; cur != lst.<span class="hljs-built_in">begin</span>()) &#123;<br>            cur = <span class="hljs-built_in">prev</span>(cur);<br>            cur = lst.<span class="hljs-built_in">erase</span>(cur);<br>            k--; ret++;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ret;<br>    &#125;<br>    <br>    <span class="hljs-function">string <span class="hljs-title">cursorLeft</span><span class="hljs-params">(<span class="hljs-type">int</span> k)</span> </span>&#123;<br>        <span class="hljs-keyword">while</span> (k &amp;&amp; cur != lst.<span class="hljs-built_in">begin</span>()) &#123;<br>            cur = <span class="hljs-built_in">prev</span>(cur);<br>            k--;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">print</span>();<br>    &#125;<br>    <br>    <span class="hljs-function">string <span class="hljs-title">cursorRight</span><span class="hljs-params">(<span class="hljs-type">int</span> k)</span> </span>&#123;<br>        <span class="hljs-keyword">while</span> (k &amp;&amp; cur != lst.<span class="hljs-built_in">end</span>()) &#123;<br>            cur = <span class="hljs-built_in">next</span>(cur);<br>            k--;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">print</span>();<br>    &#125;<br>&#125;;<br><br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">node</span> &#123;<br>    node *nxt = <span class="hljs-literal">nullptr</span>;<br>    node *pre = <span class="hljs-literal">nullptr</span>;<br>    <span class="hljs-type">char</span> v;<br>    <span class="hljs-built_in">node</span>(<span class="hljs-type">char</span> _v) &#123;<br>        v = _v;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TextEditor</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    node *head, *cur;<br>    <span class="hljs-built_in">TextEditor</span>() &#123;<br>        <span class="hljs-comment">// 设置哨兵</span><br>        head = <span class="hljs-keyword">new</span> <span class="hljs-built_in">node</span>(<span class="hljs-string">&#x27;*&#x27;</span>);<br>        cur = head;<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">addText</span><span class="hljs-params">(string text)</span> </span>&#123;<br>        node *tmp = <span class="hljs-literal">nullptr</span>;<br>        <span class="hljs-keyword">if</span> (cur &amp;&amp; cur-&gt;nxt) tmp = cur-&gt;nxt; <br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; text.<span class="hljs-built_in">size</span>(); i++) &#123;<br>            cur-&gt;nxt = <span class="hljs-keyword">new</span> <span class="hljs-built_in">node</span>(text[i]);<br>            cur-&gt;nxt-&gt;pre = cur;<br>            cur = cur-&gt;nxt;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (tmp) &#123;<br>            cur-&gt;nxt = tmp;<br>            tmp-&gt;pre = cur;<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">deleteText</span><span class="hljs-params">(<span class="hljs-type">int</span> k)</span> </span>&#123;<br>        node *f = <span class="hljs-number">0</span>;<br>        node* nn = <span class="hljs-literal">nullptr</span>;<br>        <span class="hljs-keyword">if</span> (cur-&gt;nxt) &#123;<br>            nn = cur-&gt;nxt;<br>        &#125;<br>        <span class="hljs-type">int</span> lk = k;<br>        <span class="hljs-keyword">while</span> (cur-&gt;v != <span class="hljs-string">&#x27;*&#x27;</span> &amp;&amp; k) &#123;<br>            cur-&gt;pre-&gt;nxt = nn;<br>            <span class="hljs-keyword">if</span> (nn) &#123;<br>                nn-&gt;pre = cur-&gt;pre;<br>            &#125;<br>            cur = cur-&gt;pre;<br>            k--;<br>        &#125;<br>        <span class="hljs-keyword">return</span> lk - k;<br>    &#125;<br><br>    <span class="hljs-function">string <span class="hljs-title">cursorLeft</span><span class="hljs-params">(<span class="hljs-type">int</span> k)</span> </span>&#123;<br>        <span class="hljs-type">int</span> mm = <span class="hljs-number">10</span>;<br>        <span class="hljs-keyword">while</span> (cur-&gt;v != <span class="hljs-string">&#x27;*&#x27;</span> &amp;&amp; k) &#123;<br>            cur = cur-&gt;pre;<br>            k--;<br>        &#125;<br>        string s = <span class="hljs-string">&quot;&quot;</span>;<br>        node *tmp = cur;<br>        <span class="hljs-keyword">while</span> (tmp-&gt;v != <span class="hljs-string">&#x27;*&#x27;</span> &amp;&amp; mm) &#123;<br>            s += tmp-&gt;v;<br>            tmp = tmp-&gt;pre;<br>            mm--;<br>        &#125;<br>        <span class="hljs-built_in">reverse</span>(s.<span class="hljs-built_in">begin</span>(), s.<span class="hljs-built_in">end</span>());<br>        <span class="hljs-keyword">return</span> s;<br>    &#125;<br>    <br>    <span class="hljs-function">string <span class="hljs-title">cursorRight</span><span class="hljs-params">(<span class="hljs-type">int</span> k)</span> </span>&#123;<br>        <span class="hljs-type">int</span> mm = <span class="hljs-number">10</span>;<br>        <span class="hljs-keyword">while</span> (cur-&gt;nxt != <span class="hljs-literal">nullptr</span> &amp;&amp; k) &#123;<br>            cur = cur-&gt;nxt;<br>            k--;<br>        &#125;<br>        string s = <span class="hljs-string">&quot;&quot;</span>;<br>        node *tmp = cur;<br>        <span class="hljs-keyword">while</span> (tmp-&gt;v != <span class="hljs-string">&#x27;*&#x27;</span> &amp;&amp; mm) &#123;<br>            s += tmp-&gt;v;<br>            tmp = tmp-&gt;pre;<br>            mm--;<br>        &#125;<br>        <span class="hljs-built_in">reverse</span>(s.<span class="hljs-built_in">begin</span>(), s.<span class="hljs-built_in">end</span>());<br>        <span class="hljs-keyword">return</span> s;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>
<h3 id="十字链表-lfu">十字链表 LFU</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// LFU 缓存 frequency</span><br><br><span class="hljs-comment">// LRU least recentl</span><br></code></pre></td></tr></table></figure>
<h3 id="对顶栈">对顶栈</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">TextEditor</span> &#123;<br><span class="hljs-keyword">public</span>: <br>    stack&lt;<span class="hljs-type">char</span>&gt; left, right;<br>    <span class="hljs-built_in">TextEditor</span>() &#123;&#125;<br>    <br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">addText</span><span class="hljs-params">(string text)</span> </span>&#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">char</span> c:text) left.<span class="hljs-built_in">push</span>(c);<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">deleteText</span><span class="hljs-params">(<span class="hljs-type">int</span> k)</span> </span>&#123;<br>        k = <span class="hljs-built_in">min</span>(k, (<span class="hljs-type">int</span>)left.<span class="hljs-built_in">size</span>());<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; k; i++) left.<span class="hljs-built_in">pop</span>();<br>        <span class="hljs-keyword">return</span> k;<br>    &#125;<br><br>    <span class="hljs-function">string <span class="hljs-title">text</span><span class="hljs-params">()</span> </span>&#123;<br>        string res;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>, k = <span class="hljs-built_in">min</span>((<span class="hljs-type">int</span>)left.<span class="hljs-built_in">size</span>(), <span class="hljs-number">10</span>); i &lt; k; i++) &#123;<br>            res.<span class="hljs-built_in">insert</span>(res.<span class="hljs-built_in">begin</span>(), left.<span class="hljs-built_in">top</span>());<br>            left.<span class="hljs-built_in">pop</span>();<br>        &#125;<br>        <span class="hljs-built_in">addText</span>(res);<br>        <span class="hljs-keyword">return</span> res;<br>    &#125;<br>    <br>    <span class="hljs-function">string <span class="hljs-title">cursorLeft</span><span class="hljs-params">(<span class="hljs-type">int</span> k)</span> </span>&#123;<br>        k = <span class="hljs-built_in">min</span>(k, (<span class="hljs-type">int</span>)left.<span class="hljs-built_in">size</span>());<br>        <span class="hljs-keyword">while</span> (k--) &#123;<br>            right.<span class="hljs-built_in">push</span>(left.<span class="hljs-built_in">top</span>());<br>            left.<span class="hljs-built_in">pop</span>();<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">text</span>();<br>    &#125;<br>    <br>    <span class="hljs-function">string <span class="hljs-title">cursorRight</span><span class="hljs-params">(<span class="hljs-type">int</span> k)</span> </span>&#123;<br>        k = <span class="hljs-built_in">min</span>(k, (<span class="hljs-type">int</span>)right.<span class="hljs-built_in">size</span>());<br>        <span class="hljs-keyword">while</span> (k--) &#123;<br>            left.<span class="hljs-built_in">push</span>(right.<span class="hljs-built_in">top</span>());<br>            right.<span class="hljs-built_in">pop</span>();<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">text</span>();<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>
<h3 id="set">set</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">auto</span> p1 = <span class="hljs-built_in">prev</span>(s1.<span class="hljs-built_in">lb</span>(x));<br><span class="hljs-keyword">if</span> (arr[*p1] &gt; arr[x]) &#123;<br>    s1.<span class="hljs-built_in">insert</span>(x); <br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> p = <span class="hljs-built_in">next</span>(s1.<span class="hljs-built_in">find</span>(x)); p != s1.<span class="hljs-built_in">end</span>(); p++) &#123;<br>        <span class="hljs-type">int</span> id = *p;<br>        <span class="hljs-keyword">if</span> (arr[x] &lt;= arr[id]) &#123;<br>            dd.<span class="hljs-built_in">pub</span>(id);      <br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">break</span>;<br>    &#125;<br>    <span class="hljs-built_in">rep</span> (i, <span class="hljs-number">0</span>, <span class="hljs-built_in">sz</span>(dd)) s1.<span class="hljs-built_in">erase</span>(dd[i]);                      <br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="hash">hash</h3>
<ol type="1">
<li>! hash collision, 也可通过设置两组哈希的trick实现
生日悖论：365的空间装23组数据，出现哈希碰撞的概率超过1/2 因此
MOD通常要远大于储存数据数的平方，且多采用质数。</li>
<li>线性探测 / 两组哈希综合判断。</li>
<li>O(n^2) - 若允许n*log - 使用红黑树，较为稳定。</li>
</ol>
<p><a href="#string_hash">string</a></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// is guaranteed to be at least 32767 %...</span><br><br><span class="hljs-function">ll <span class="hljs-title">codec</span><span class="hljs-params">(ll x, ll y)</span> </span>&#123;<br>    x += <span class="hljs-number">1e9</span> + <span class="hljs-number">5</span>;<br>    y += <span class="hljs-number">1e9</span> + <span class="hljs-number">5</span>;<br>    <span class="hljs-keyword">return</span> (x &lt;&lt; <span class="hljs-number">32</span>) + y;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">decode</span><span class="hljs-params">(<span class="hljs-type">const</span> ll &amp;v, ll &amp;x, ll &amp;y)</span> </span>&#123;<br>    x = v &gt;&gt; <span class="hljs-number">32</span>;<br>    y = v &amp; ((<span class="hljs-number">1ll</span> &lt;&lt; <span class="hljs-number">32</span>) - <span class="hljs-number">1</span>);<br>    x -= <span class="hljs-number">1e9</span> + <span class="hljs-number">5</span>;<br>    y -= <span class="hljs-number">1e9</span> + <span class="hljs-number">5</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">gethash</span><span class="hljs-params">(<span class="hljs-type">int</span> base, <span class="hljs-type">int</span> mod)</span> </span>&#123;<br>    <span class="hljs-type">int</span> hashvalue = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span> &amp;x: temp) &#123;<br>    <span class="hljs-comment">// maybe exsit negative </span><br>        hashvalue = <span class="hljs-number">1ll</span> * hashvalue * base % mod + (x + <span class="hljs-number">101</span>);<br>        hashvalue %= mod;<br>    &#125;<br>    <span class="hljs-keyword">return</span> hashvalue;<br>&#125;<br><span class="hljs-built_in">gethash</span>(<span class="hljs-number">263</span>, <span class="hljs-built_in">int</span>(<span class="hljs-number">1e9</span>) + <span class="hljs-number">7</span>);<br><br><span class="hljs-comment">// 树哈希 树的同构问题 若哈希值</span><br><br><span class="hljs-comment">// 随机哈希</span><br><br><br><span class="hljs-comment">// 线性探测</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">mov</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt; &amp;arr, <span class="hljs-type">int</span> pos)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (arr[pos] == <span class="hljs-number">0</span>) &#123;<br>        arr[pos] = pos + <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">return</span> pos + <span class="hljs-number">1</span>; <br>    &#125;<br>    arr[pos] = <span class="hljs-built_in">mov</span>(arr, arr[pos]);<br>    <span class="hljs-keyword">return</span> arr[pos];<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="dp">DP</h2>
<h3 id="maskmap">mask/map</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 1e6 * 30 * 26 -- 1e9</span><br>unordered_map&lt;<span class="hljs-type">long</span> <span class="hljs-type">long</span>, <span class="hljs-type">long</span> <span class="hljs-type">long</span>&gt; dp;<br><span class="hljs-function"><span class="hljs-type">long</span> <span class="hljs-type">long</span> <span class="hljs-title">codec</span><span class="hljs-params">(<span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r, <span class="hljs-type">int</span> cur)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> l * <span class="hljs-number">100100</span> + r*<span class="hljs-number">100</span> + cur;<br>&#125;<br><br><br><span class="hljs-comment">// ！subset</span><br><span class="hljs-comment">// lowbit</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">lowbit</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> x &amp; (-x);<br>&#125;<br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> sub = mask; sub; sub = (sub - <span class="hljs-number">1</span>) &amp; mask) &#123;<br>    <span class="hljs-comment">// sub...</span><br>&#125;<br><span class="hljs-comment">// 状态压缩枚举子集</span><br><span class="hljs-comment">// 注意 ^ 是在arr[i] 完全包含时才代表子集，否则会影响值</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; N; i++) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = mask - <span class="hljs-number">1</span>; j &gt; <span class="hljs-number">-1</span>; j--) &#123;<br>        dp[j] = <span class="hljs-built_in">min</span>(dp[j], dp[j &amp; (j ^ arr[i])] + <span class="hljs-number">1</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 采用后向定义的方式更为高效</span><br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">1</span> ; i &lt; n ; i ++)&#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j = <span class="hljs-number">0</span> ; j &lt; <span class="hljs-number">21</span> ; j ++)&#123;<br>        <span class="hljs-keyword">if</span>(!(i &gt;&gt; j &amp; <span class="hljs-number">1</span>)) <span class="hljs-keyword">continue</span> ;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> k = <span class="hljs-number">0</span> ; k &lt; <span class="hljs-number">21</span> ; k ++) &#123;<br>            <span class="hljs-comment">// 右移 &amp; 1, 防止重复更新</span><br>            <span class="hljs-keyword">if</span>(!g[j][k] || (i &gt;&gt; k &amp; <span class="hljs-number">1</span>)) <span class="hljs-keyword">continue</span>;<br>            <span class="hljs-comment">// 跳过 i + (1 &lt;&lt; k)</span><br>            dp[i + (<span class="hljs-number">1</span> &lt;&lt; k)][k] += dp[i][j];<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="path">path</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 二维背包路径 - 不同于一维</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = target; j &gt; <span class="hljs-number">-1</span>; j--) &#123;<br>        <span class="hljs-comment">// 注意不同于一维背包的省略</span><br>        dp[i][j] = dp[i - <span class="hljs-number">1</span>][j];<br>        <span class="hljs-keyword">if</span> (j &gt;= res[i - <span class="hljs-number">1</span>])   <br>            dp[i][j] = <span class="hljs-built_in">max</span>(dp[i][j], dp[i - <span class="hljs-number">1</span>][j - res[i - <span class="hljs-number">1</span>]] + res[i - <span class="hljs-number">1</span>]);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="记忆化">记忆化</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 记忆化注意使用void</span><br><span class="hljs-keyword">if</span> (!dp[l][j - <span class="hljs-number">1</span>].<span class="hljs-built_in">size</span>()) &#123;<br>    <span class="hljs-built_in">dfs</span>(s, l, j - <span class="hljs-number">1</span>);<br>&#125;<br><span class="hljs-comment">// n^2 + l - r遍历 == n^3</span><br></code></pre></td></tr></table></figure>
<h3 id="环">环</h3>
<p><img src="/images/circle-1.png" srcset="/img/loading.gif" lazyload alt="image-20220326223751746" style="zoom:50%;" /></p>
<h3 id="易错">易错</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 容易忽略冗余的状态 leetcode-1977</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>    <span class="hljs-comment">// 这里j定义为长度，但由于f[i][j]的定义为小于等于j，累加仍然需要，与括号匹配类似，&quot;不合理&quot;的dp不带f[i][j]是不合理，且有时候有些dp需要预留位置。</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; j++) &#123;<br>    <span class="hljs-comment">// 若使用 for (int j = 1; j &lt;= i; j++) 对于 i = 4, j = 3, 存在f[1][2]这种情况，dp[1][2]不合理不代表f[1][2]无意义</span><br>        <span class="hljs-type">int</span> id1 = i - j, id2 = i - <span class="hljs-number">2</span> * j;<br>        <span class="hljs-keyword">if</span> (id1 &gt;= <span class="hljs-number">0</span> &amp;&amp; num[id1] != <span class="hljs-string">&#x27;0&#x27;</span>) dp[i][j] = f[id1][j - <span class="hljs-number">1</span>];<br>        <span class="hljs-keyword">if</span> (id2 &gt;= <span class="hljs-number">0</span> &amp;&amp; num[id1] != <span class="hljs-string">&#x27;0&#x27;</span> &amp;&amp; num[id2] != <span class="hljs-string">&#x27;0&#x27;</span>) &#123;<br>            <span class="hljs-type">int</span> vv = v[id1 + <span class="hljs-number">1</span>][id2 + <span class="hljs-number">1</span>], v1 = id1 + vv, v2 = id2 + vv;<br>            <span class="hljs-keyword">if</span> (v1 &lt; id1 + j &amp;&amp; num[v2] &lt; num[v1]) dp[i][j] = (dp[i][j] + dp[id1][j]) % MOD;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (v1 &gt;= id1 + j) dp[i][j] = (dp[i][j] + dp[id1][j]) % MOD; <br>        &#125;<br>        f[i][j] = (f[i][j - <span class="hljs-number">1</span>] + dp[i][j]) % MOD;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="博弈论">博弈论</h2>
<h3 id="igc博弈">IGC博弈</h3>
<p>经典的Bash, Wythoff 以及Nim博弈问题,
都属于所谓的公平组合博弈(Impartial Combinatorial Games, ICG),
ICG具有的的特征/性质如下(用局势(position)描述游戏中的一个状态):</p>
<p><img src="/images/game-1.png" srcset="/img/loading.gif" lazyload alt="image-20220329101921911" style="zoom: 67%;" /></p>
<p>枚举分析, 转化状态, 找规律：</p>
<h4 id="枚举状态">枚举状态</h4>
<p>剩下3堆石子
（1,1,k）、（1,k,k）和（k,k,k）都是必胜态【都可以留下（k,k）必败态给对手】，
接下来对于任一个（a,b,c）都可以转化为（k+m, k+n, k+p）
而对于m，有3种情况，分别是 ① 三者相等，就是（k’,k’,k’），为必胜态。 ②
两者相等, 这样把k+m取完，留下必败态给对手，也是必胜态。 ③
三者不等，这种情况非常复杂，用简单的公式难以表达，我们可以观察到（1,2,3）是必败态，但是（1,2,4）是必胜态，两者只是相差一个石子。</p>
<h4 id="推理">推理</h4>
<ol type="1">
<li>? 异或的规律</li>
<li>总能从先手必胜态-&gt;后手必败态</li>
<li>反证矛盾, 先手当前状态不可能失败</li>
</ol>
<h3 id="极大极小">极大极小</h3>
<p>MIN_MAX</p>
<p>lq - 异或序列</p>
<ol type="1">
<li>从高位bit开始, bit == 1 直接获胜</li>
<li>bit 为奇数，且总数为奇数 - 胜利</li>
<li>! bit为奇数，总数为偶数 - 失败 (可以选择其他，知道不得不选)</li>
</ol>
<h2 id="数论">数论</h2>
<h3 id="误差分析">误差分析</h3>
<p>** l-2117 abbreviating-the-product-of-a-range 误差分析
<img src="/images/error.png" srcset="/img/loading.gif" lazyload style="zoom: 50%;" /></p>
<p>乘法转对数，利用double可以自动四舍五入</p>
<h3 id="组合">组合</h3>
<p>一步dp<br />
1<br />
1 1<br />
1 2 1<br />
1 3 3 1</p>
<p>回推状态转移 映射到杨辉三角中<br />
通过杨辉三角一次向右逆向展开，也就得到了杨辉三角上一列和的表达式</p>
<p><span class="math display">\[
    \sum_{i = 0} ^{k} C_{n + i}^n = C_{}
\]</span></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-type">const</span> <span class="hljs-type">int</span> maxn = <span class="hljs-number">61</span>;<br><span class="hljs-type">long</span> <span class="hljs-type">long</span> C[maxn][maxn] = &#123;<span class="hljs-number">0</span>&#125;;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">make_c</span><span class="hljs-params">()</span> </span>&#123;<br>    C[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= maxn; i++) &#123;<br>        C[i][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= maxn; j++) &#123;<br>            C[i][j] = C[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>] + C[i - <span class="hljs-number">1</span>][j];<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// lucas定理 </span><br><span class="hljs-comment">// mod = 1e5 时</span><br>LL fact[maxn+<span class="hljs-number">5</span>];<br>LL a[maxn+<span class="hljs-number">10</span>];<br>LL inv[maxn+<span class="hljs-number">10</span>];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span>&#123;<br>    a[<span class="hljs-number">0</span>] = a[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span>;<br>    fact[<span class="hljs-number">0</span>] = fact[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span>;<br>    inv[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt;= maxn; i++)<br>    &#123;<br>        fact[i] = fact[i<span class="hljs-number">-1</span>] * i % mod;<br>        inv[i] = (mod - mod/i) * inv[mod%i]%mod;<br>        a[i] = a[i<span class="hljs-number">-1</span>] * inv[i] % mod;<br>    &#125;<br>&#125;<br><br><span class="hljs-function">LL <span class="hljs-title">C</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">int</span> m)</span></span>&#123;<br>    <span class="hljs-keyword">return</span> fact[n]*a[n-m]%mod*a[m]%mod;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<h3 id="逆元">逆元</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// rsa 解密 求乘法逆元</span><br><span class="hljs-comment">// 辗转相除</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">exgcd</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b, <span class="hljs-type">int</span>&amp; x, <span class="hljs-type">int</span>&amp; y)</span> </span>&#123;<br>  	<span class="hljs-keyword">if</span> (b == <span class="hljs-number">0</span>) &#123;<br>    	x = <span class="hljs-number">1</span>, y = <span class="hljs-number">0</span>;<br>    	<span class="hljs-keyword">return</span>;<br>  	&#125;<br>    <span class="hljs-comment">// x = y, y = x - a / b * y;</span><br>  	<span class="hljs-built_in">exgcd</span>(b, a % b, y, x);<br>  	y -= a / b * x;<br>&#125;<br><br><span class="hljs-comment">// 32 to 127 chr</span><br><span class="hljs-comment">// 加 mod</span><br>e = (x % m + m) % m;<br><br></code></pre></td></tr></table></figure>
<h3 id="质因子">质因子</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// C++ Version</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">euler_phi</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> </span>&#123;<br>	<span class="hljs-type">int</span> ans = n;<br>    <span class="hljs-comment">// 注意i = 2</span><br>	<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i * i &lt;= n; i++)<br>		<span class="hljs-keyword">if</span> (n % i == <span class="hljs-number">0</span>) &#123;<br>		ans = ans / i * (i - <span class="hljs-number">1</span>);<br>		<span class="hljs-keyword">while</span> (n % i == <span class="hljs-number">0</span>) n /= i;<br>    &#125;<br>	<span class="hljs-keyword">if</span> (n &gt; <span class="hljs-number">1</span>) ans = ans / n * (n - <span class="hljs-number">1</span>);<br>	<span class="hljs-keyword">return</span> ans;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="大数运算">大数运算</h3>
<h4 id="大整数">大整数</h4>
<p>大数除法 - 大数乘法 (FFT?)</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 注意&#x27;1&#x27;而非 1</span><br><span class="hljs-keyword">if</span> (mid == <span class="hljs-number">0</span> &amp;&amp; a[mid] == <span class="hljs-string">&#x27;1&#x27;</span>) &#123;<br>&#125;<br><br><span class="hljs-comment">// 大整数加减法 大数 - 小数</span><br><span class="hljs-comment">// carry 表示借位</span><br><span class="hljs-type">int</span> carry = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = A.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; --i) &#123;<br>    <span class="hljs-comment">// 减去借位 加法则加入，注意最后会多一位</span><br>    <span class="hljs-type">int</span> tmp = A[i] - carry;<br>    <span class="hljs-comment">// 注意越界</span><br>    <span class="hljs-keyword">if</span> (i &lt; B.<span class="hljs-built_in">size</span>()) tmp = tmp - B[i];<br>	<span class="hljs-comment">// 纠正负数</span><br>    ans.<span class="hljs-built_in">push_back</span>((tmp + <span class="hljs-number">10</span>) % <span class="hljs-number">10</span>);<br>    <span class="hljs-keyword">if</span> (tmp &lt; <span class="hljs-number">0</span>)  carry = <span class="hljs-number">1</span>;<br>	<span class="hljs-keyword">else</span> carry = <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-comment">// 如果高位都是0，则要将这些前导0都要删掉，如果最后结果就是0，则最后一个0不能弹出</span><br><span class="hljs-comment">// 加法注意添加1</span><br><span class="hljs-keyword">while</span> (ans.<span class="hljs-built_in">size</span>() &gt; <span class="hljs-number">1</span> &amp;&amp; ans.<span class="hljs-built_in">back</span>() == <span class="hljs-number">0</span>) &#123;<br>    ans.<span class="hljs-built_in">pop_back</span>();<br>&#125;<br><br><span class="hljs-comment">// 大整数乘除法 </span><br><span class="hljs-comment">// 乘法 v * b 判断b==0, 记录进位 </span><br><span class="hljs-comment">// 多项式fft - 二分...</span><br><span class="hljs-keyword">for</span>( i = <span class="hljs-number">0</span>; i &lt; len1; ++ i) &#123;<br>    <span class="hljs-type">int</span> b = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; len2 || b; ++ j) &#123;<br>        <span class="hljs-comment">// 注意初始化0</span><br>        <span class="hljs-type">int</span> t = ans[i + j] + str1[i] * str2[j] + b;<br>        ans[i + j] = t % <span class="hljs-number">10</span>;<br>        <span class="hljs-comment">// 进位</span><br>        b = t / <span class="hljs-number">10</span>;<br>    &#125;<br>    len = i+j<span class="hljs-number">-1</span>  <span class="hljs-comment">//最终的位数</span><br>&#125;<br><br><span class="hljs-comment">// r为余数 最后一起去除前导零（！非前导需保留）</span><br><span class="hljs-comment">// 竖式除法</span><br>r = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; A.<span class="hljs-built_in">size</span>(); i++)&#123;<br>    <span class="hljs-comment">// 生成新数</span><br>    r = r * <span class="hljs-number">10</span> + A[i];<br>    <span class="hljs-comment">// 除前导0都要保留</span><br>    q.<span class="hljs-built_in">push_back</span>(r / b);<br>    <span class="hljs-comment">// 保留余数</span><br>    r = r % b;<br>&#125;<br><span class="hljs-comment">// 前导零</span><br><span class="hljs-built_in">reverse</span>(q.<span class="hljs-built_in">begin</span>(), q.<span class="hljs-built_in">end</span>());<br><span class="hljs-keyword">while</span> (q.<span class="hljs-built_in">size</span>() &gt; <span class="hljs-number">1</span> &amp;&amp; q.<span class="hljs-built_in">back</span>() == <span class="hljs-number">0</span>) &#123;<br>    q.<span class="hljs-built_in">pop_back</span>();<br>&#125;<br><br><span class="hljs-comment">// 大整数减法优化</span><br><span class="hljs-comment">// 二分估计 log2大整数 - 位数N </span><br><span class="hljs-comment">// 记录相减，注意位数的对其 通过补0</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">SubStract</span><span class="hljs-params">( <span class="hljs-type">int</span> *p1, <span class="hljs-type">int</span> *p2, <span class="hljs-type">int</span> len1, <span class="hljs-type">int</span> len2 )</span></span>&#123;&#125;<br><span class="hljs-comment">// 将除数扩大，使得除数和被除数位数相等</span><br><span class="hljs-keyword">for</span> ( i=len1<span class="hljs-number">-1</span>; i&gt;=<span class="hljs-number">0</span>; i-- ) &#123;<br>    <span class="hljs-keyword">if</span> ( i&gt;=nTimes )<br>        num_b[i] = num_b[i-nTimes];<br>    <span class="hljs-keyword">else</span>                     <br>        num_b[i] = <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-comment">// 重复调用，同时记录减成功的位数</span><br><span class="hljs-keyword">for</span>( j=<span class="hljs-number">0</span>; j &lt;= nTimes; j++) &#123;<br>    <span class="hljs-comment">// 相同位数减k次</span><br>	<span class="hljs-keyword">while</span>((nTemp = <span class="hljs-built_in">SubStract</span>(num_a,num_b + j,len1,len2 - j)) &gt;= <span class="hljs-number">0</span>) &#123;<br>        len1 = nTemp;<br>        <span class="hljs-comment">// 每成功减一次，将商的相应位加1</span><br>		num_c[nTimes-j]++;<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h4 id="快速乘幂">快速乘/幂</h4>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// ! extend gcd 不可以使用ull 存在负值 ull a &gt; -1 恒成立</span><br><span class="hljs-function"><span class="hljs-keyword">inline</span> ull <span class="hljs-title">mul</span><span class="hljs-params">(ull a, ull b, ull mod)</span></span>&#123;<br>    ull ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span>( b &gt; <span class="hljs-number">0</span> )&#123;<br>        <span class="hljs-keyword">if</span>(b &amp; <span class="hljs-number">1</span>) ans = (ans + a) % mod;<br>        a = (a + a) % mod;<br>        b &gt;&gt;= <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><span class="hljs-function">ull <span class="hljs-title">quick_pow</span><span class="hljs-params">(ull a, ull b, ull mod)</span> </span>&#123;<br>    ull res = <span class="hljs-number">1</span>;<br>    a %= mod;<br>    <span class="hljs-keyword">while</span>(b) &#123;<br>        <span class="hljs-keyword">if</span> (b &amp; <span class="hljs-number">1</span>) res = <span class="hljs-built_in">mul</span>(res, a, mod);<br>        a = <span class="hljs-built_in">mul</span>(a, a, mod); <br>        b &gt;&gt;= <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> res;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="素数筛">素数筛</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 质数筛</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> maxn <span class="hljs-number">100005</span>;<br><span class="hljs-type">int</span> visit[maxn];<br>visit[<span class="hljs-number">0</span>] = visit[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span>;<br><span class="hljs-comment">// 埃氏筛法, 合数</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt;= maxn; i++) &#123;<br>    <span class="hljs-keyword">if</span> (!visite[i]) &#123;<br>    	<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = i * i; j &lt;= maxn; j += i) &#123;<br>            visit[j] = <span class="hljs-number">1</span>;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-comment">// 欧拉筛法, 30 = 2*15, 3*10 可能被多次筛选 - 最小质因子 - 欧拉筛</span><br><span class="hljs-type">int</span> visit[maxn];<br><span class="hljs-comment">// 素数</span><br><span class="hljs-type">int</span> prime[maxn];<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt;= maxn; i++) &#123;<br>    <span class="hljs-keyword">if</span> (!visit[i]) &#123;<br>        <span class="hljs-comment">// prime[0] 记录当前素数个数</span><br>        prime[++prime[<span class="hljs-number">0</span>]] = i;<br>    &#125;<br>    <span class="hljs-comment">// prime[j] 表示第j个素数</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= prime[<span class="hljs-number">0</span>] &amp;&amp; i * prime[j] &lt;= maxn; j++) &#123;<br>        visit[i * prime[j]] = <span class="hljs-number">1</span>;<br>        <span class="hljs-comment">// 一定不是最小质因子，break</span><br>        <span class="hljs-keyword">if</span> (i % prime[j] == <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 三个公因子相乘的种类数</span><br><span class="hljs-comment">// factor n^3</span><br><span class="hljs-comment">// factor_num(i) + factor_num(a / i)</span><br></code></pre></td></tr></table></figure>
<h3 id="同余方程">同余方程</h3>
<p>(快速幂 + 快速乘)</p>
<p>cf-209 div2 D 遍历无线纸带</p>
<ol type="1">
<li><p>自反性，对称性，传递性, 线性运算， 幂运算</p>
<p><img src="/images/mod-1.png" srcset="/img/loading.gif" lazyload alt="image-20220331155354746" style="zoom:50%;" /></p>
<p><span class="math inline">\(a \equiv b \pmod{m} ⟹ a^n \equiv
b^n\pmod{m}\)</span></p></li>
</ol>
<p><img src="/images/mod-2.png" srcset="/img/loading.gif" lazyload alt="image-20220331151356347" style="zoom: 67%;" /></p>
<p>具体解法</p>
<p><img src="/images/mod-3.png" srcset="/img/loading.gif" lazyload alt="image-20220331151512291" style="zoom:67%;" /></p>
<p><img src="/images/mod-4.png" srcset="/img/loading.gif" lazyload alt="image-20220331155606327" style="zoom:50%;" /></p>
<p>l-974 subarrays sums divided by k<br />
modulus = (sum % k + k) % k(c++)</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// a mod b = a - y [x / y] (x)</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">mod</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> (a % b + b) % b;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">inline</span> ull <span class="hljs-title">mul</span><span class="hljs-params">(ull a, ull b, ull mod)</span></span>&#123;<br>    ull ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span>( b &gt; <span class="hljs-number">0</span> )&#123;<br>        <span class="hljs-keyword">if</span>(b &amp; <span class="hljs-number">1</span>) ans = (ans + a) % mod;<br>        a = (a + a) % mod;<br>        b &gt;&gt;= <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><span class="hljs-function">ull <span class="hljs-title">quick_pow</span><span class="hljs-params">(ull a, ull b, ull mod)</span> </span>&#123;<br>    ull res = <span class="hljs-number">1</span>;<br>    a %= mod;<br>    <span class="hljs-keyword">while</span>(b) &#123;<br>        <span class="hljs-keyword">if</span> (b &amp; <span class="hljs-number">1</span>) res = <span class="hljs-built_in">mul</span>(res, a, mod);<br>        a = <span class="hljs-built_in">mul</span>(a, a, mod); <br>        b &gt;&gt;= <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> res;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">gcd</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (b == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> a;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">gcd</span>(b, a % b);<br>&#125;<br><br><span class="hljs-comment">// rsa 解密 求乘法逆元</span><br><span class="hljs-comment">// 辗转相除</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">exgcd</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b, <span class="hljs-type">int</span>&amp; x, <span class="hljs-type">int</span>&amp; y)</span> </span>&#123;<br>  	<span class="hljs-keyword">if</span> (b == <span class="hljs-number">0</span>) &#123;<br>    	x = <span class="hljs-number">1</span>, y = <span class="hljs-number">0</span>;<br>    	<span class="hljs-keyword">return</span>;<br>  	&#125;<br>    <span class="hljs-comment">// x = y, y = x - a / b * y;</span><br>  	<span class="hljs-built_in">exgcd</span>(b, a % b, y, x);<br>  	y -= a / b * x;<br>&#125;<br><br><span class="hljs-comment">// 32 to 127 chr</span><br><span class="hljs-comment">// 加 mod</span><br>e = (x % m + m) % m;<br><br><span class="hljs-comment">// C++ Version</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">euler_phi</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> </span>&#123;<br>	<span class="hljs-type">int</span> ans = n;<br>    <span class="hljs-comment">// 注意i = 2</span><br>	<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i * i &lt;= n; i++)<br>		<span class="hljs-keyword">if</span> (n % i == <span class="hljs-number">0</span>) &#123;<br>		ans = ans / i * (i - <span class="hljs-number">1</span>);<br>		<span class="hljs-keyword">while</span> (n % i == <span class="hljs-number">0</span>) n /= i;<br>    &#125;<br>	<span class="hljs-keyword">if</span> (n &gt; <span class="hljs-number">1</span>) ans = ans / n * (n - <span class="hljs-number">1</span>);<br>	<span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><span class="hljs-type">int</span> phi[MAXN];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">init</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> </span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        <span class="hljs-comment">// 除1外没有数的欧拉函数是本身，所以如果phi[i] = i则说明未被筛到</span><br>        phi[i] = i;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt;= n; i++)<br>        <span class="hljs-keyword">if</span> (phi[i] == i) <span class="hljs-comment">// 未被筛到</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = i; j &lt;= n; j += i) <span class="hljs-comment">// 所有含有该因子的数都进行一次操作</span><br>                phi[j] = phi[j] / i * (i - <span class="hljs-number">1</span>);<br>&#125;<br></code></pre></td></tr></table></figure>
<p>阶乘/因子</p>
<p>取log long double求阶乘的大小</p>
<p><img src="/images/factor-1.png" srcset="/img/loading.gif" lazyload alt="image-20220325120510677" style="zoom:50%;" /></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 朴素法</span><br><span class="hljs-comment">// C++ Version</span><br><span class="hljs-function">list&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">breakdown</span><span class="hljs-params">(<span class="hljs-type">int</span> N)</span> </span>&#123;<br>	list&lt;<span class="hljs-type">int</span>&gt; result;<br>	<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i * i &lt;= N; i++) &#123;<br>		<span class="hljs-keyword">if</span> (N % i == <span class="hljs-number">0</span>) &#123;  <span class="hljs-comment">// 如果 i 能够整除 N，说明 i 为 N 的一个质因子。</span><br>			<span class="hljs-keyword">while</span> (N % i == <span class="hljs-number">0</span>) N /= i;<br>			result.<span class="hljs-built_in">push_back</span>(i);<br>		&#125;<br>	&#125;<br>  	<span class="hljs-keyword">if</span> (N != <span class="hljs-number">1</span>) &#123;  <span class="hljs-comment">// 说明再经过操作之后 N 留下了一个素数</span><br>    	result.<span class="hljs-built_in">push_back</span>(N);<br>	&#125;<br>	<span class="hljs-keyword">return</span> result;<br>&#125;<br><span class="hljs-comment">// 求欧拉函数</span><br><span class="hljs-comment">// C++ Version</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">euler_phi</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> </span>&#123;<br>	<span class="hljs-type">int</span> ans = n;<br>	<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i * i &lt;= n; i++)<br>    	<span class="hljs-keyword">if</span> (n % i == <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-comment">// ans - ans / i</span><br>        	ans = ans / i * (i - <span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">while</span> (n % i == <span class="hljs-number">0</span>) n /= i;<br>    &#125;<br>    <span class="hljs-comment">// 减去自身，1不需要减</span><br>  	<span class="hljs-keyword">if</span> (n &gt; <span class="hljs-number">1</span>) ans = ans / n * (n - <span class="hljs-number">1</span>);<br>  	<span class="hljs-keyword">return</span> ans;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>l-29 divide two integers<br />
cannot use *, /, mod<br />
divisor multiply - dividend</p>
<p>08.05 recursively multiply<br />
64 1 + ... + n<br />
&amp;&amp; replace if<br />
repeat replace for<br />
if b &amp; 1 A + A res += A</p>
<p>l-371 sum of two integer<br />
carry = a &amp; b shift left<br />
while(carry != 0)</p>
<p>l-369 valid perfect square<br />
(n + 1)^2 - n^2 = 2n + 1(culmulative)<br />
f(x) = x^2 - n^2</p>
<h2 id="图">图</h2>
<h3 id="欧拉">欧拉</h3>
<p>l-332 reconstruct itinerary<br />
seven bridge problem solved by Euler<br />
in degree = out degree(except S/E)<br />
? visited pop_back()<br />
dfs(pop()), res.push_back(),reverse<br />
the last number to end the search is last node</p>
<p>l-753 cracking the safe<br />
? state not be visited<br />
? how to visit n numbers<br />
: set up a rule -- 0 - k 所有未经历过的状态</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 判断</span><br><br><span class="hljs-comment">// 无向图 ！有向图不满足</span><br><span class="hljs-comment">// 0 - 2个奇数点为欧拉路径</span><br><span class="hljs-comment">// 欧拉回路 皆为偶数点</span><br><br><span class="hljs-comment">// 有向图 欧拉路径</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">const</span> string&amp; curr)</span> </span>&#123;<br>    <span class="hljs-keyword">while</span> (vec.<span class="hljs-built_in">count</span>(curr) &amp;&amp; vec[curr].<span class="hljs-built_in">size</span>() &gt; <span class="hljs-number">0</span>) &#123;<br>        string tmp = vec[curr].<span class="hljs-built_in">top</span>();<br>        vec[curr].<span class="hljs-built_in">pop</span>();<br>        <span class="hljs-built_in">dfs</span>(<span class="hljs-built_in">move</span>(tmp));<br>    &#125;<br>    stk.<span class="hljs-built_in">emplace_back</span>(curr);<br>&#125;<br><br><br></code></pre></td></tr></table></figure>
<p>prove:<br />
each node has k in and out degree : Euler Path<br />
if no way out, go back to the node<br />
then find a new node</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 1、建邻接表adj、入度表indeg、出度表outdeg，省略...</span><br><span class="hljs-comment"># 2、判断是否存在</span><br><span class="hljs-comment"># 连通性 - 利用并查集 (除去孤立的节点)</span><br><span class="hljs-comment"># 回路无奇数度</span><br><span class="hljs-comment"># 3、dfs求解欧拉路径</span><br>ans = []<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">node</span>):<br>    <span class="hljs-keyword">while</span> adj[node]:<br>		// 利用pop()<br>        v = adj[node].pop()<br>        dfs(v)<br>        ans.append([node, v]) <span class="hljs-comment"># 循环里记录结果 循环外则为回路</span><br>dfs(start)<br>            <br><span class="hljs-comment"># 4、最后再逆回来</span><br><span class="hljs-keyword">return</span> ans[::-<span class="hljs-number">1</span>]<br></code></pre></td></tr></table></figure>
<h3 id="bfs">BFS</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">node</span> &#123;<br>    <span class="hljs-type">int</span> x, y;<br>    <span class="hljs-built_in">node</span> (<span class="hljs-type">int</span> _x, <span class="hljs-type">int</span> _y) &#123;<br>        x = _x, y = _y;<br>    &#125;<br>&#125;;<br>vvi g;<br>vvi dir = &#123;&#123;<span class="hljs-number">1</span>, <span class="hljs-number">0</span>&#125;, &#123;<span class="hljs-number">0</span>, <span class="hljs-number">-1</span>&#125;, &#123;<span class="hljs-number">0</span>, <span class="hljs-number">1</span>&#125;, &#123;<span class="hljs-number">-1</span>, <span class="hljs-number">0</span>&#125;&#125;;<br><span class="hljs-type">int</span> n, m;<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">check</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> (<span class="hljs-number">0</span> &lt;= x &amp;&amp; x &lt; n &amp;&amp; <span class="hljs-number">0</span> &lt;= y &amp;&amp; y &lt; m &amp;&amp; g[x][y] != <span class="hljs-number">0</span>); <br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">bfs</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y, <span class="hljs-type">int</span> tx, <span class="hljs-type">int</span> ty)</span> </span>&#123;<br>    <span class="hljs-function">vvi <span class="hljs-title">vis</span><span class="hljs-params">(n, vi(m, <span class="hljs-number">0</span>))</span></span>;<br>    queue&lt;node&gt; q;<br>    q.<span class="hljs-built_in">push</span>(<span class="hljs-built_in">node</span>(x, y));<br>    vis[x][y] = <span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> cnt = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">if</span> (x == tx &amp;&amp; y == ty) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span>(q.<span class="hljs-built_in">size</span>()) &#123;<br>        <span class="hljs-type">int</span> nn = q.<span class="hljs-built_in">size</span>();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; nn; i++) &#123;<br>            node v = q.<span class="hljs-built_in">front</span>();<br>            q.<span class="hljs-built_in">pop</span>();<br>            x = v.x, y = v.y;            <br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">4</span>; j++) &#123;<br>                <span class="hljs-type">int</span> xx = x + dir[j][<span class="hljs-number">0</span>], yy = y + dir[j][<span class="hljs-number">1</span>];<br>                <span class="hljs-keyword">if</span> (<span class="hljs-built_in">check</span>(xx, yy)) &#123;<br>                    <span class="hljs-keyword">if</span> (xx == tx &amp;&amp; yy == ty) <span class="hljs-keyword">return</span> cnt + <span class="hljs-number">1</span>; <br>                    <span class="hljs-keyword">if</span> (!vis[xx][yy]) &#123;<br>                        q.<span class="hljs-built_in">push</span>(<span class="hljs-built_in">node</span>(xx, yy));<br>                        vis[xx][yy] = <span class="hljs-number">1</span>;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>        cnt++;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><br>queue&lt;tuple&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;&gt; q;<br><span class="hljs-comment">//  pre-place start nodes;</span><br><span class="hljs-keyword">while</span> (!q.<span class="hljs-built_in">empty</span>()) &#123;<br>    <span class="hljs-keyword">auto</span> [u, mask, dist] = q.<span class="hljs-built_in">front</span>();<br>    q.<span class="hljs-built_in">pop</span>();<br>    <span class="hljs-keyword">if</span> (mask == (<span class="hljs-number">1</span> &lt;&lt; n) - <span class="hljs-number">1</span>) &#123;<br>        ans = dist;<br>        <span class="hljs-keyword">break</span>;<br>    &#125;<br>    <span class="hljs-comment">// 搜索相邻的节点</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> v: graph[u]) &#123;<br>        <span class="hljs-comment">// 将 mask 的第 v 位置为 1</span><br>        <span class="hljs-type">int</span> mask_v = mask | (<span class="hljs-number">1</span> &lt;&lt; v);<br>        <span class="hljs-comment">// seen prevent repeated traversals</span><br>        <span class="hljs-keyword">if</span> (!seen[v][mask_v]) &#123;<br>            q.<span class="hljs-built_in">emplace</span>(v, mask_v, dist + <span class="hljs-number">1</span>);<br>            seen[v][mask_v] = <span class="hljs-literal">true</span>;<br>        &#125;<br>    &#125;<br>&#125;;<br><br></code></pre></td></tr></table></figure>
<h3 id="拓扑">拓扑</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// l-1857 判环</span><br><span class="hljs-comment">// degree[i] &lt;= 1</span><br><span class="hljs-comment">// in[i] &lt;= 0</span><br><br><span class="hljs-keyword">while</span> (!q.<span class="hljs-built_in">empty</span>()) &#123;<br>    <span class="hljs-comment">// 记录点数</span><br>    ++found;<br>    <span class="hljs-type">int</span> u = q.<span class="hljs-built_in">front</span>();<br>    q.<span class="hljs-built_in">pop</span>();<br>    <span class="hljs-comment">// 将节点 u 对应的颜色增加 1</span><br>    ++f[u][colors[u] - <span class="hljs-string">&#x27;a&#x27;</span>];<br>    <span class="hljs-comment">// 枚举 u 的后继节点 v</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> v: g[u]) &#123;<br>        --indeg[v];<br>        <span class="hljs-comment">// 将 f(v,c) 更新为其与 f(u,c) 的较大值</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> c = <span class="hljs-number">0</span>; c &lt; <span class="hljs-number">26</span>; ++c) &#123;<br>            f[v][c] = <span class="hljs-built_in">max</span>(f[v][c], f[u][c]);<br>        &#125;<br>        <span class="hljs-comment">// 无向图indeg[v] == 1</span><br>        <span class="hljs-keyword">if</span> (!indeg[v]) &#123;<br>            q.<span class="hljs-built_in">push</span>(v);<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">if</span> (found != n) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i) &#123;<br>    <span class="hljs-keyword">auto</span> edge = edges[i];<br>    <span class="hljs-type">int</span> node1 = edge[<span class="hljs-number">0</span>], node2 = edge[<span class="hljs-number">1</span>];<br>    <span class="hljs-keyword">if</span> (parent[node2] != node2) &#123;<br>        conflict = i;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">// record </span><br>        parent[node2] = node1;<br>        <span class="hljs-keyword">if</span> (uf.<span class="hljs-built_in">find</span>(node1) == uf.<span class="hljs-built_in">find</span>(node2)) &#123;<br>            cycle = i;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            uf.<span class="hljs-built_in">merge</span>(node1, node2);<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// onstack 判环</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> i)</span></span>&#123;<br>	onstk[i]=vis[i]=<span class="hljs-literal">true</span>;<br>	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> it:al[i])&#123;<br>		<span class="hljs-keyword">if</span> (onstk[it]) cyc=<span class="hljs-literal">true</span>;<br>		<span class="hljs-keyword">if</span> (!vis[it]) <span class="hljs-built_in">dfs</span>(it);<br>	&#125;<br>	onstk[i]=<span class="hljs-literal">false</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="dfs路径">dfs路径</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// !记录路径</span><br><span class="hljs-comment">// codec unordered_map&lt;int, int&gt; 两点确定一条直线</span><br><span class="hljs-comment">// 判断transfer</span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> k)</span> </span>&#123;<br>	visit[k] = <span class="hljs-number">1</span>;<br>    <span class="hljs-comment">// 记录当前的路径</span><br>	path[m++] = k;<br>	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> i:graph[k]) &#123;<br>        <span class="hljs-keyword">if</span> (visit[i] == <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-built_in">dfs</span>(i);<br>        &#125;<br>        <span class="hljs-keyword">if</span> (visit[i] == <span class="hljs-number">1</span>) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = m - <span class="hljs-number">1</span>;; j--) &#123;<br>                <span class="hljs-keyword">if</span> (path[j] == i) <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>	&#125;<br>	visit[k] = <span class="hljs-number">2</span>;<br>    <span class="hljs-comment">// 注意回退</span><br>	m--;<br>&#125;<br><br><span class="hljs-comment">// 无向图</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> v)</span> </span>&#123;<br>    path[cnt++] = v;<br>    vis[v] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> &amp;vv:g[v]) &#123;<br>        <span class="hljs-comment">// 防止重复</span><br>        <span class="hljs-keyword">if</span> (vv == last) <span class="hljs-keyword">continue</span>;<br>        <span class="hljs-keyword">if</span> (vis[vv] == <span class="hljs-number">2</span>) <span class="hljs-keyword">continue</span>;<br>        <span class="hljs-keyword">if</span> (vis[vv] == <span class="hljs-number">1</span>) &#123;<br>            cycle = <span class="hljs-number">1</span>;<br>        &#125;<br>        <span class="hljs-keyword">else</span> &#123;<br>            last = v;<br>            <span class="hljs-built_in">dfs</span>(vv);<br>        &#125;<br>    &#125;<br>    vis[v] = <span class="hljs-number">2</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="判断直径">判断直径</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 第一次dfs确认最远端的顶点</span><br><span class="hljs-comment">// 选任一远端顶点再次遍历</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs1</span><span class="hljs-params">(<span class="hljs-type">int</span> v, <span class="hljs-type">int</span> h)</span> </span>&#123;<br>    vis[v] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (h &gt; mh) &#123;<br>        mh = h;<br>        tmp.<span class="hljs-built_in">clear</span>();<br>        tmp.<span class="hljs-built_in">pub</span>(v);<br>    &#125;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (h == mh) &#123;<br>        tmp.<span class="hljs-built_in">pub</span>(v);<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> &amp;vv:g[v]) &#123;<br>        <span class="hljs-keyword">if</span> (!vis[vv]) &#123;<br>            <span class="hljs-built_in">dfs1</span>(vv, h + <span class="hljs-number">1</span>);<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-built_in">memset</span>(vis, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(vis));<br><span class="hljs-built_in">dfs1</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>);<br><span class="hljs-type">int</span> nxt = tmp[<span class="hljs-number">0</span>];<br><span class="hljs-built_in">rep</span> (i, <span class="hljs-number">0</span>, <span class="hljs-built_in">sz</span>(tmp)) s.<span class="hljs-built_in">insert</span>(tmp[i]);<br><span class="hljs-built_in">memset</span>(vis, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(vis));<br><span class="hljs-built_in">dfs1</span>(nxt, <span class="hljs-number">1</span>);<br><span class="hljs-built_in">rep</span> (i, <span class="hljs-number">0</span>, <span class="hljs-built_in">sz</span>(tmp)) s.<span class="hljs-built_in">insert</span>(tmp[i]);<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> &amp;i:s) cout &lt;&lt; i + <span class="hljs-number">1</span> &lt;&lt; endl;<br></code></pre></td></tr></table></figure>
<h3 id="并查集">并查集</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 并查集</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">find</span><span class="hljs-params">(<span class="hljs-type">int</span> i)</span></span>&#123;<br>    <span class="hljs-keyword">if</span>(u[i] != i)&#123;<br>        u[i] = <span class="hljs-built_in">find</span>(u[i]);<br>    &#125;<br>    <span class="hljs-keyword">return</span> u[i];<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">unionn</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span></span>&#123;<br>    <span class="hljs-type">int</span> ra = <span class="hljs-built_in">find</span>(a);<br>    <span class="hljs-type">int</span> rb = <span class="hljs-built_in">find</span>(b);<br>    <span class="hljs-keyword">if</span>(ra != rb)&#123;<br>        <span class="hljs-keyword">if</span>(sz[ra] &gt; sz[rb])&#123;<br>            <span class="hljs-built_in">swap</span>(ra, rb);<br>        &#125;<br>        u[ra] = rb;<br>        sz[rb] += sz[ra];<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="最短路">最短路</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// dijstra </span><br><span class="hljs-comment">// 一次完成一次节点的更新，可使用priority queue优化</span><br><span class="hljs-comment">// 每次找到距离最近的节点，无法再被更新</span><br><span class="hljs-comment">// 若增加相同距离cost的优化 cost[cur] 已经无法再被优化 </span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">1010</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> INF=<span class="hljs-number">0x3f3f3f3f</span>;<br>vector&lt;<span class="hljs-type">int</span>&gt; adj[N];<br><span class="hljs-type">int</span> n,score[N][N],vou[N][N];<br><span class="hljs-type">int</span> d[N],vis[N],w[N],pre[N];<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dijkstra</span><span class="hljs-params">(<span class="hljs-type">int</span> s)</span> </span>&#123;<br>    <span class="hljs-built_in">fill</span>(d,d+N,INF);<br>	<span class="hljs-built_in">fill</span>(vis,vist+N,<span class="hljs-number">0</span>);<br>	<span class="hljs-built_in">fill</span>(w,w+N,<span class="hljs-number">0</span>);<br>	d[s] = <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">// n个节点</span><br>	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>; i&lt;=n; i++) &#123;<br>		<span class="hljs-type">int</span> u=<span class="hljs-number">-1</span>, MIN=INF;<br>		<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>; j&lt;=n; j++) &#123;<br>			<span class="hljs-keyword">if</span>(!vis[j]&amp;&amp;d[j]&lt;MIN) &#123;<br>				u=j;<br>				MIN=d[j];<br>			&#125;<br>		&#125;<br>		<span class="hljs-keyword">if</span>(u==<span class="hljs-number">-1</span>) <span class="hljs-keyword">return</span>;<br>		vist[u]=<span class="hljs-literal">true</span>;<br>		<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> x=<span class="hljs-number">0</span>; x &lt; adj[u].<span class="hljs-built_in">size</span>(); x++) &#123;<br>			<span class="hljs-type">int</span> v=adj[u][x];<br>			<span class="hljs-keyword">if</span>(!vist[v]) &#123;<br>				<span class="hljs-keyword">if</span>(d[u]+score[u][v]&lt;d[v]) &#123;<br>					d[v]=d[u]+score[u][v];<br>					w[v]=w[u]+vou[u][v];<br>					pre[v]=u;<br>			&#125;<br>		&#125;<br>	&#125;<br>&#125;<br><br><span class="hljs-comment">// dijstra 聚点 + 邻接表 N + 1个顶点</span><br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;N;++i)&#123;<br>    <span class="hljs-keyword">if</span>(inDegree[i]==<span class="hljs-number">0</span>)&#123;<br>        Adj[N].<span class="hljs-built_in">push_back</span>(i);<br>        zeroDegree.<span class="hljs-built_in">insert</span>(i);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 找到相同</span><br><span class="hljs-comment">// INT_MAX溢出</span><br><span class="hljs-keyword">if</span> (dist[node] != dist[tmp[i]])<br>	<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br><br><span class="hljs-comment">// floyd</span><br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> k = <span class="hljs-number">0</span>; k &lt;= n; k ++ )&#123;<br>	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt;= n; i ++ )&#123;<br>		<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt;= n; j ++ )&#123;<br>			<span class="hljs-keyword">if</span>(g[i][k]!=inf&amp;&amp;g[k][j]!=inf)<br>				g[i][j] = <span class="hljs-built_in">min</span>(g[i][k]+g[k][j],g[i][j]);<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// dfs 回溯路径 -&gt; 多目标</span><br><span class="hljs-comment">// pair&lt;int, int&gt; 历史的最大的需要带的累积</span><br><span class="hljs-built_in">rep</span> (i, <span class="hljs-number">0</span>, n) &#123;<br>    <span class="hljs-keyword">if</span> (!vis[i] &amp;&amp; w[id][i] != INF) &#123;<br>        <span class="hljs-keyword">if</span> (w[id][i] + dis[id] &lt; dis[i]) &#123;<br>            dis[i] = w[id][i] + dis[id];<br>            fa[i].<span class="hljs-built_in">clear</span>();<br>            cv[i].<span class="hljs-built_in">clear</span>();<br>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> &amp;vv:cv[id]) &#123;<br>                fa[i].<span class="hljs-built_in">pub</span>(id);<br>                cv[i].<span class="hljs-built_in">pub</span>(vv + c / <span class="hljs-number">2</span> - cc[i]);<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (w[id][i] + dis[id] == dis[i]) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> &amp;vv:cv[id]) &#123;<br>                fa[i].<span class="hljs-built_in">pub</span>(id);<br>                cv[i].<span class="hljs-built_in">pub</span>(vv + c / <span class="hljs-number">2</span> - cc[i]);<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> v)</span> </span>&#123;<br>    temppath.<span class="hljs-built_in">push_back</span>(v);<br>    <span class="hljs-keyword">if</span>(v == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-type">int</span> need = <span class="hljs-number">0</span>, back = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = temppath.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>            <span class="hljs-type">int</span> id = temppath[i];<br>            <span class="hljs-keyword">if</span>(weight[id] &gt; <span class="hljs-number">0</span>) &#123;<br>                back += weight[id];<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-keyword">if</span>(back &gt; (<span class="hljs-number">0</span> - weight[id])) &#123;<br>                    back += weight[id];<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    need += ((<span class="hljs-number">0</span> - weight[id]) - back);<br>                    back = <span class="hljs-number">0</span>;<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span>(need &lt; minNeed) &#123;<br>            minNeed = need;<br>            minBack = back;<br>            path = temppath;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(need == minNeed &amp;&amp; back &lt; minBack) &#123;<br>            minBack = back;<br>            path = temppath;<br>        &#125;<br>        temppath.<span class="hljs-built_in">pop_back</span>();<br>        <span class="hljs-keyword">return</span> ;<br>    &#125;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; pre[v].<span class="hljs-built_in">size</span>(); i++)<br>        <span class="hljs-built_in">dfs</span>(pre[v][i]);<br>    temppath.<span class="hljs-built_in">pop_back</span>();<br>&#125;<br><br><span class="hljs-comment">// 0 - 1 bfs</span><br><span class="hljs-keyword">while</span> (<span class="hljs-built_in">sz</span>(q)) &#123;<br>    <span class="hljs-type">int</span> tt = q.<span class="hljs-built_in">front</span>();<br>    q.<span class="hljs-built_in">pop</span>();<br>    <span class="hljs-keyword">if</span> (tt == b) <span class="hljs-keyword">break</span>;<br>    vis[tt] = <span class="hljs-number">1</span>;<br>    <span class="hljs-built_in">rep</span> (i, <span class="hljs-number">0</span>, <span class="hljs-built_in">sz</span>(g[tt])) &#123;<br>        <span class="hljs-type">int</span> line = id[tt][i];<br>        <span class="hljs-type">int</span> tar = g[tt][i];<br>        <span class="hljs-function">node <span class="hljs-title">nn</span><span class="hljs-params">(line, tt)</span></span>;<br>        <span class="hljs-type">int</span> sign = <span class="hljs-number">1</span>;<br>        <span class="hljs-built_in">rep</span> (i, <span class="hljs-number">0</span>, <span class="hljs-built_in">sz</span>(par[tt])) &#123;<br>            <span class="hljs-keyword">if</span> (line == par[tt][i].line) &#123;<br>                sign = <span class="hljs-number">0</span>;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (dis[tar] &gt; dis[tt] + <span class="hljs-number">1</span>) &#123;<br>            par[tar].<span class="hljs-built_in">clear</span>();<br>            dis[tar] = dis[tt] + <span class="hljs-number">1</span>;<br>            par[tar].<span class="hljs-built_in">pub</span>(nn);<br>            ex[tar] = ex[tt] + sign;<br>            q.<span class="hljs-built_in">push</span>(tar);<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (dis[tar] == dis[tt] + <span class="hljs-number">1</span>) &#123;<br>            <span class="hljs-type">int</span> ww = ex[tt] + sign;<br>            <span class="hljs-keyword">if</span> (ww == ex[tar]) &#123;<br>                par[tar].<span class="hljs-built_in">pub</span>(nn);<br>            &#125;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ww &lt; ex[tar]) &#123;<br>                par[tar].<span class="hljs-built_in">clear</span>();<br>                par[tar].<span class="hljs-built_in">pub</span>(nn);<br>                ex[tar] = ww;<br>            &#125;<br>            q.<span class="hljs-built_in">push</span>(tar);<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// A*</span><br><br></code></pre></td></tr></table></figure>
<h3 id="mst强连通">MST/强连通</h3>
<p>minimum weight spanning tree 使得权值最短的路</p>
<ol type="1">
<li><p>Kruskal</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 从最小边开始加入</span><br><span class="hljs-comment">// 并查集判断是否有环</span><br><span class="hljs-comment">// 无环则加入</span><br><br><span class="hljs-built_in">sort</span>(edgelist.<span class="hljs-built_in">begin</span>(), edgelist.<span class="hljs-built_in">end</span>());<br><br><span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br><br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> edge : edgelist) &#123;<br>    <span class="hljs-type">int</span> w = edge[<span class="hljs-number">0</span>], x = edge[<span class="hljs-number">1</span>], y = edge[<span class="hljs-number">2</span>];<br>    <span class="hljs-comment">// take that edge in MST if it does form a cycle</span><br>    <span class="hljs-keyword">if</span> (s.<span class="hljs-built_in">find</span>(x) != s.<span class="hljs-built_in">find</span>(y)) &#123;<br>        s.<span class="hljs-built_in">unite</span>(x, y);<br>        ans += w;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
<li><p>强连通分量 tarjan</p></li>
</ol>
<h3 id="网络流问题">网络流问题</h3>
<p>源点：有n个点，有m条有向边，其中有一个点比较特殊，它只出不进，即入度为0。这样的点我们称为源点，一般用字母S表示。
汇点：另一个点也比较特殊，只进不出，即出度为0。这样的点我们称为汇点，一般用字母T表示。
容量和流量：每条有向边上有两个量，容量和流量，从i到j的容量表示为c[i,j]表示，流量则用f[i,j]表示。</p>
<p>模板1 最小费用最大流问题 在最大流的基础上(全选...) 使得费用最小 模板2
二分图权值匹配 - 一一对应</p>
<h2 id="二分">二分</h2>
<ol type="1">
<li>核心是判断f(x)的二元性（一部分相同 一部分不同）以及最快的求法</li>
<li>注意边界的讨论，差值类问题a[l]和a[l - 1]同时考虑即可</li>
<li>! 广义的规律</li>
</ol>
<p>ls-37</p>
<p><img src="/images/binary-1.png" srcset="/img/loading.gif" lazyload alt="image-20220414201412729" style="zoom:50%;" /></p>
<p>直线满足顺序</p>
<h3 id="二元性">二元性</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 计数</span><br><br><span class="hljs-comment">// 记录小于等于x的数值个数s</span><br><span class="hljs-keyword">auto</span> pos = <span class="hljs-built_in">ub</span>(<span class="hljs-built_in">all</span>(v), x) - v.<span class="hljs-built_in">begin</span>();<br><span class="hljs-comment">// 记录大于x的数值个数</span><br><span class="hljs-built_in">sz</span>(v) - pos;<br><span class="hljs-comment">// 记录小于x的数值个数 大于等于同理,指针指向第一个不小于x的位置</span><br><span class="hljs-keyword">auto</span> pos = <span class="hljs-built_in">lb</span>(<span class="hljs-built_in">all</span>(v), x) - v.<span class="hljs-built_in">begin</span>();<br><br><span class="hljs-comment">// 插入使得数组递增 - 在第一个不大于x的位置上插入 - 本来的意义</span><br>arr.<span class="hljs-built_in">insert</span>(pos, v); <br></code></pre></td></tr></table></figure>
<p>存在二元的规律即可</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 二分 注意边界的处理，若不存在想要找的值得情况。</span><br><span class="hljs-keyword">while</span>(left &lt; right) &#123;<br>    <span class="hljs-comment">// 是否加一取决于是否收敛</span><br>    <span class="hljs-type">int</span> mid = (left + right) / <span class="hljs-number">2</span>;<br>    <span class="hljs-comment">// 不需要的结果</span><br>    <span class="hljs-keyword">if</span> (nn[mid] &lt; diff) &#123;<br>        left = mid + <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">else</span> &#123;<br>        right = mid;<br>    &#125;<br>&#125;<br><span class="hljs-comment">// lower bound first element not less than i; </span><br><span class="hljs-comment">// upper bound first element greater than i; greater&lt;int&gt; 则相反</span><br><span class="hljs-keyword">auto</span> lower = <span class="hljs-built_in">lower_bound</span>(data.<span class="hljs-built_in">begin</span>(), data.<span class="hljs-built_in">end</span>(), i);<br><span class="hljs-keyword">if</span> (lower != data.<span class="hljs-built_in">end</span>()) <span class="hljs-type">int</span> pos = lower - data.<span class="hljs-built_in">begin</span>();<br></code></pre></td></tr></table></figure>
<h2 id="贪心">贪心</h2>
<p>!注意多状态的特性<br />
只考虑了存在一种可能AC由于AB，但没有考虑到BC的整体情况
总出现在相同的两列 - 点集中斜率的最大值</p>
<p><img src="/images/greedy01.png" srcset="/img/loading.gif" lazyload alt="image-20220414201526887" style="zoom:50%;" /></p>
<p>只需要考虑 a+=lowbit(a)</p>
<p>局部贪心 diff 只有在遇到B是更新</p>
<h2 id="树">树</h2>
<h3 id="堆">堆</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">heapify</span><span class="hljs-params">(<span class="hljs-type">int</span> size, <span class="hljs-type">int</span> i)</span></span>&#123;<br>	<span class="hljs-comment">// 最后一个非叶子节点的位置 2x -&gt; 左节点 2x+1 -&gt; 右节点</span><br>	<span class="hljs-type">int</span> l = <span class="hljs-number">2</span> * i + <span class="hljs-number">1</span>; <br>    <span class="hljs-type">int</span> r = <span class="hljs-number">2</span> * i + <span class="hljs-number">2</span>;<br>    <span class="hljs-type">int</span> largest = i;<br>    <span class="hljs-keyword">if</span> (l &lt; size &amp;&amp; hT[l] &gt; hT[largest])<br>		largest = l;<br>	<span class="hljs-keyword">if</span> (r &lt; size &amp;&amp; hT[r] &gt; hT[largest])<br>		largest = r;<br>	<span class="hljs-keyword">if</span> (largest != i) &#123;<br>        <span class="hljs-comment">// 自顶而下调整</span><br>        <span class="hljs-built_in">swap</span>(&amp;hT[i], &amp;hT[largest]);<br>		<span class="hljs-built_in">heapify</span>(size, largest);<br>  	&#125;<br>&#125;<br><span class="hljs-comment">// heap sort 堆顶替换，重建堆</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">heapSort</span><span class="hljs-params">(<span class="hljs-type">int</span> size)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">// 建堆（从最后一个非叶子节点向上）</span><br>    <span class="hljs-comment">// size 2n + 2 / 2n + 3</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = size / <span class="hljs-number">2</span> - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>        <span class="hljs-built_in">heapify</span>(size, i);<br>    &#125;<br>    <span class="hljs-comment">// 堆排序</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = size - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">1</span>; i--) &#123;<br>        <span class="hljs-comment">// 将当前最大的放置到数组末尾</span><br>        <span class="hljs-built_in">swap</span>(arr[<span class="hljs-number">0</span>], arr[i]);<br>        <span class="hljs-comment">// 将未完成排序的部分继续进行堆排序</span><br>        <span class="hljs-built_in">heapify</span>(i, <span class="hljs-number">0</span>);             <br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="multiset">multiset</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// multiset 使用 prev()</span><br><span class="hljs-keyword">auto</span> check = [&amp;](<span class="hljs-type">int</span> mid) -&gt; <span class="hljs-type">bool</span> &#123;<br>    <span class="hljs-type">int</span> p = pills;<br>    <span class="hljs-comment">// 工人的有序集合</span><br>    multiset&lt;<span class="hljs-type">int</span>&gt; ws;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = m - mid; i &lt; m; ++i) &#123;<br>        ws.<span class="hljs-built_in">insert</span>(workers[i]);<br>    &#125;<br>    <span class="hljs-comment">// 从大到小枚举每一个任务</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = mid - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; --i) &#123;<br>        <span class="hljs-comment">// 如果有序集合中最大的元素大于等于 tasks[i]</span><br>        <span class="hljs-comment">// rbegin() 不行</span><br>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">auto</span> it = <span class="hljs-built_in">prev</span>(ws.<span class="hljs-built_in">end</span>()); *it &gt;= tasks[i]) &#123;<br>            ws.<span class="hljs-built_in">erase</span>(it);<br>        &#125;<br>        <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">if</span> (!p) &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            &#125;<br>            <span class="hljs-keyword">auto</span> rep = ws.<span class="hljs-built_in">lower_bound</span>(tasks[i] - strength);<br>            <span class="hljs-keyword">if</span> (rep == ws.<span class="hljs-built_in">end</span>()) &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            &#125;<br>            --p;<br>            ws.<span class="hljs-built_in">erase</span>(rep);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;;<br></code></pre></td></tr></table></figure>
<h3 id="二叉树">二叉树</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 注意树的建图过程 子节点为0 需要排除父节点</span><br><span class="hljs-comment">// 相似的模式</span><br><span class="hljs-comment">// 基于一个二叉搜索树即推导 -&gt; 难以证明</span><br><br><span class="hljs-comment">// AVL 左左 右右 左右 = 右右 + 左左</span><br><span class="hljs-comment">// 红黑树 Is It A Red-Black Tree？</span><br><br><span class="hljs-comment">// 有可能没有节点</span><br><span class="hljs-comment">// ！！！注意根节点的特殊情况</span><br><span class="hljs-keyword">if</span> (cur != <span class="hljs-number">1</span> &amp;&amp; graph[cur].<span class="hljs-built_in">size</span>() == <span class="hljs-number">1</span>) &#123;<br>    isleave = <span class="hljs-literal">true</span>;<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cur == <span class="hljs-number">1</span> &amp;&amp; graph[cur].<span class="hljs-built_in">size</span>() == <span class="hljs-number">0</span>) isleave = <span class="hljs-literal">true</span>;<br></code></pre></td></tr></table></figure>
<h3 id="bit树">bit树</h3>
<p>树状数组</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// c数组为[1, maxn]</span><br><br>vector&lt;<span class="hljs-type">int</span>&gt; c;<br><span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">int</span> <span class="hljs-title">lowbit</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> x &amp; (-x);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">update</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> maxn, <span class="hljs-type">int</span> v)</span> </span>&#123;<br>    <span class="hljs-comment">// x += 1 若nums从0开始</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = x; i &lt;= maxn; i += <span class="hljs-built_in">lowbit</span>(i))<br>        c[i] += v;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">getsum</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> </span>&#123;<br>    <span class="hljs-type">int</span> sum = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = x; i &gt;= <span class="hljs-number">1</span>; i -= <span class="hljs-built_in">lowbit</span>(i))<br>        sum += c[i];<br>    <span class="hljs-keyword">return</span> sum;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">sumRange</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span> </span>&#123;<br>    <span class="hljs-comment">// 从i到j</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">getsum</span>(j) - <span class="hljs-built_in">getsum</span>(i - <span class="hljs-number">1</span>);<br>&#125;<br><br><span class="hljs-comment">// 示例</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> n = <span class="hljs-number">5</span>;<br>    c.<span class="hljs-built_in">assign</span>(n + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>        <span class="hljs-built_in">update</span>(i, n, <span class="hljs-number">1</span>);<br>    &#125;<br>    cout &lt;&lt; <span class="hljs-built_in">sumRange</span>(<span class="hljs-number">2</span>, <span class="hljs-number">5</span>);<br>&#125;<br></code></pre></td></tr></table></figure>
<p>线段树</p>
<p>l-307 range sum query<br />
<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/92920381">solutions</a><br />
sqrt(n) blocks(known length)<br />
binary indexed tree(Fenwick tree) 对操作数进行累加 (前面所有的操作数)
而非数值本身</p>
<figure>
<img src="/images/bit-1.png" srcset="/img/loading.gif" lazyload alt="image-20220307143054073" />
<figcaption aria-hidden="true">image-20220307143054073</figcaption>
</figure>
<p>l-1622 fancy-sequence<br />
inverse order - add all multall opt - ax + b<br />
combine opt 使用数组快于vector</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-type">void</span> <span class="hljs-keyword">operator</span> += (<span class="hljs-type">const</span> node &amp;t)&#123;<br>    a = a * t.a%mod;<br>    b = (b * t.a + t.b)%mod;<br>&#125;<br></code></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/*  </span><br><span class="hljs-comment">10分钟以内，顺利可敲完</span><br><span class="hljs-comment">线段树 完全二分树 占用空间大小2n - 4n</span><br><span class="hljs-comment">将问题拆分成二分的区间，通过push_up在回溯结束后维护各个区间的值。</span><br><span class="hljs-comment">如果要区间更新，需要在查询的过程中，通过push_down传递lazy_tag，同时还原对应节点的真实值。</span><br><span class="hljs-comment">区间赋值的tag就是值本身，区间加减则通过加减。</span><br><span class="hljs-comment">lv, rv代表维护的区间，l、v代表查询/更新的区间。一般用[lv, mid], [mid + 1, rv]代表左右节点</span><br><span class="hljs-comment">l、v值在于限定节点，而节点更新只与lv，rv，lz有关，与l、v无关。</span><br><span class="hljs-comment">时间复杂度证明可以考虑只有两侧的节点需要不断的递归，中间的树的分支都不需要再次更新。</span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> maxn = <span class="hljs-number">8e5</span>;<br><span class="hljs-type">int</span> cnt = <span class="hljs-number">1</span>;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span> &#123;<br>    <span class="hljs-comment">// 考虑到赋值</span><br>    ll v = <span class="hljs-number">0</span>, l, r, lz = <span class="hljs-number">0</span>, is_c = <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">// max/min，初始值只能为0，max，min可能被未初始化的值</span><br>    <span class="hljs-comment">// 因为有push_down，不用担心在push_up时虚拟节点的值影响min</span><br>    ll vv = <span class="hljs-number">0</span>, llz = <span class="hljs-number">0</span>;<br>&#125;tree[<span class="hljs-number">4</span> * maxn];<br><br><span class="hljs-comment">// tree[0].l = 1, tree[0].r = 2</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">create</span><span class="hljs-params">(ll cur)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (!tree[cur].is_c) &#123;<br>        tree[cur].l = cnt++;<br>        tree[cur].r = cnt++;<br>        tree[cur].is_c = <span class="hljs-number">1</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 依次更新上层节点的值</span><br><span class="hljs-comment">// 可以改写成区间最值</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">push_up</span><span class="hljs-params">(ll cur)</span> </span>&#123;<br>    <span class="hljs-type">int</span> lnode = tree[cur].l, rnode = tree[cur].r;<br>    <span class="hljs-comment">// 未更新的节点可以不更新 针对max与min</span><br>    tree[cur].v = tree[lnode].v + tree[rnode].v;<br>&#125;<br><br><span class="hljs-comment">// 懒更新 </span><br><span class="hljs-comment">// 有区间赋值，区间加减两种。 </span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">push_down</span><span class="hljs-params">(ll cur, ll lv, ll rv)</span> </span>&#123;<br>    <span class="hljs-comment">// 还原区间</span><br>    <span class="hljs-type">int</span> mid = (lv + rv) / <span class="hljs-number">2</span>;<br>    <span class="hljs-type">int</span> lnode = tree[cur].l, rnode = tree[cur].r;<br>    <span class="hljs-comment">// 注意这里还未创建的节点也需要更新</span><br>    tree[lnode].lz += tree[cur].lz;<br>    tree[lnode].v += tree[cur].lz * (mid - lv + <span class="hljs-number">1</span>);  <br>    tree[rnode].lz += tree[cur].lz;<br>    tree[rnode].v += tree[cur].lz * (rv - mid);<br>    tree[cur].lz = <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-comment">// 区间更新，同时用于初始化。</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">update</span><span class="hljs-params">(ll cur, ll lv, ll rv, ll l, ll r, ll v)</span> </span>&#123;<br>    <span class="hljs-built_in">create</span>(cur);<br>    <span class="hljs-comment">// 当前节点被包含，打标记而不更新子节点。</span><br>    <span class="hljs-keyword">if</span> (l &lt;= lv &amp;&amp; rv &lt;= r) &#123;<br>        tree[cur].v += v * (rv - lv + <span class="hljs-number">1</span>);<br>        tree[cur].lz += v;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-comment">// 未被包含，则只需要部分节点，因此要push_down与push_up左/右侧节点</span><br>    <span class="hljs-built_in">push_down</span>(cur, lv, rv);<br>    <span class="hljs-type">int</span> mid = (lv + rv) / <span class="hljs-number">2</span>, lnode = tree[cur].l, rnode = tree[cur].r;<br>    <br>    <span class="hljs-comment">// 只剩下两侧的节点，一定有lv &lt;= l 以及 rv &gt;= r, 因此分别只需要l、r在区间之内就好。</span><br>    <span class="hljs-comment">// 注意区间有交集的判定，基于限制条件才好判断，否则需要考虑一前一后两种相交和包含三种情况。 </span><br>    <span class="hljs-keyword">if</span> (l &lt;= mid)<br>        <span class="hljs-built_in">update</span>(lnode, lv, mid, l, r, v);<br>    <span class="hljs-keyword">if</span> (r &gt;= mid + <span class="hljs-number">1</span>)<br>        <span class="hljs-built_in">update</span>(rnode, mid + <span class="hljs-number">1</span>, rv, l, r, v);<br>    <br>    <span class="hljs-comment">// 此时值已经更新，可以push_up</span><br>    <span class="hljs-built_in">push_up</span>(cur);<br>&#125;<br><br><span class="hljs-comment">// 获取区间值</span><br><span class="hljs-function">ll <span class="hljs-title">query</span><span class="hljs-params">(<span class="hljs-type">int</span> cur, <span class="hljs-type">int</span> lv, <span class="hljs-type">int</span> rv, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span> </span>&#123;<br>    <span class="hljs-comment">// 查询与更新类似，需要的时候更新节点</span><br>    <span class="hljs-built_in">create</span>(cur);<br>    <span class="hljs-keyword">if</span> (l &lt;= lv &amp;&amp; rv &lt;= r) &#123;<br>        <span class="hljs-keyword">return</span> tree[cur].v;<br>    &#125;<br>    <span class="hljs-comment">// 这一步确保子节点的值没有问题</span><br>    <span class="hljs-built_in">push_down</span>(cur, lv, rv);<br>    <span class="hljs-type">int</span> mid = (lv + rv) / <span class="hljs-number">2</span>, lnode = tree[cur].l, rnode = tree[cur].r;<br>    ll ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">// 同理，两侧需要查询</span><br>    <span class="hljs-keyword">if</span> (l &lt;= mid) &#123;<br>        ans += <span class="hljs-built_in">query</span>(lnode, lv, mid, l, r);<br>    &#125;<br>    <span class="hljs-keyword">if</span> (r &gt;= mid + <span class="hljs-number">1</span>) &#123;<br>        ans += <span class="hljs-built_in">query</span>(rnode, mid + <span class="hljs-number">1</span>, rv, l, r);<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><span class="hljs-comment">// 示例</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> n = <span class="hljs-number">10</span>;<br>    <span class="hljs-comment">// 初始化</span><br>    cnt = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">4</span> * n; i++) &#123;<br>        tree[i].is_c = <span class="hljs-number">0</span>, tree[i].lz = <span class="hljs-number">0</span>, tree[i].v = <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-comment">// 区间更新</span><br>    <span class="hljs-built_in">update</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, n - <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>);<br>    <span class="hljs-built_in">update</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, n - <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>);<br>    <span class="hljs-comment">// 区间查询</span><br>    cout &lt;&lt; <span class="hljs-built_in">query</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, n - <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>) &lt;&lt; endl;<br>    <span class="hljs-comment">// for (int i = 0; i &lt; n; i++) </span><br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="指针">指针</h2>
<h3 id="滑动">滑动</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 滑动</span><br><span class="hljs-keyword">while</span> (i &lt;= j, j &lt; n) &#123;<br>    <span class="hljs-keyword">if</span> (a &gt; tar) &#123;<br>        ans = <span class="hljs-built_in">max</span>(ans, val);<br>        j++;<br>    &#125;<br>    <span class="hljs-keyword">else</span> &#123;<br>        i++;<br>        <span class="hljs-comment">// 补集，不需要更新</span><br>        ans = <span class="hljs-built_in">max</span>(ans, val); <br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="链表数组">链表数组</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 创建链表，或用map</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> MAXN=<span class="hljs-number">100010</span>;<br><span class="hljs-type">int</span> bg,n,k;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">node</span> &#123;<br>	<span class="hljs-type">int</span> id,data,next;<br>&#125; Node[MAXN];<br><br>vector&lt;node&gt; ans;<br><br><span class="hljs-keyword">while</span>(cpy != <span class="hljs-number">-1</span>) &#123;<br>    ans.<span class="hljs-built_in">push_back</span>(Node[cpy]);<br>    cpy = Node[cpy].next;<br>&#125; <br></code></pre></td></tr></table></figure>
<h2 id="string">String</h2>
<h3 id="trie">Trie</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 可删除</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">TrieNode</span> &#123;<br>    string word;<br>    unordered_map&lt;<span class="hljs-type">char</span>, TrieNode *&gt; children;<br>    <span class="hljs-built_in">TrieNode</span>() &#123;<br>        <span class="hljs-keyword">this</span>-&gt;word = <span class="hljs-string">&quot;&quot;</span>;<br>    &#125;   <br>&#125;;<br><br><span class="hljs-comment">// 同时判断isend</span><br><span class="hljs-keyword">if</span> (nxt-&gt;word.<span class="hljs-built_in">size</span>() &gt; <span class="hljs-number">0</span>) &#123;<br>    res.<span class="hljs-built_in">insert</span>(nxt-&gt;word);<br>    nxt-&gt;word = <span class="hljs-string">&quot;&quot;</span>;<br>&#125;<br><br><span class="hljs-comment">// 遍历结束删除</span><br><span class="hljs-keyword">if</span> (nxt-&gt;children.<span class="hljs-built_in">empty</span>()) &#123;<br>    root-&gt;children.<span class="hljs-built_in">erase</span>(ch);<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="kmp">KMP</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 相反方向需要map</span><br><span class="hljs-comment">// 动态规划 - 前缀</span><br><span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">nxt</span><span class="hljs-params">(m)</span></span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>, j = <span class="hljs-number">0</span>; i &lt; m; i++) &#123;<br>    <span class="hljs-keyword">while</span>(j &gt; <span class="hljs-number">0</span> &amp;&amp; part[j] != part[i]) j = nxt[j - <span class="hljs-number">1</span>];<br>    <span class="hljs-keyword">if</span> (part[j] == part[i]) nxt[i] = ++j;<br>&#125;<br><br><span class="hljs-comment">// kmp匹配</span><br><span class="hljs-keyword">while</span>(l &lt; n) &#123;<br>    <span class="hljs-keyword">if</span> (ns[l] == s[r]) &#123;<br>        l++;<br>        r++;<br>    &#125;<br>    <span class="hljs-keyword">else</span> &#123;<br>        res += r;<br>        <span class="hljs-keyword">while</span>(r &gt; <span class="hljs-number">0</span> &amp;&amp; ns[l] != s[r]) &#123;<br>            r = pre[r - <span class="hljs-number">1</span>];<br>            res += r;<br>        &#125; <br>        <span class="hljs-keyword">if</span> (r == <span class="hljs-number">0</span> &amp;&amp; ns[l] != s[r]) l++;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (r == n) &#123;<br>        <span class="hljs-comment">//...</span><br>        r = pre[r];<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="string_hash">string_hash</h3>
<p><a href="#hash">hash</a></p>
<p>字母的hash (long long ) int(1e9 + 7) prime base = 31<br />
l-1044 longest duplicate substring</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 滑动哈希 长度为定值</span><br><span class="hljs-type">long</span> <span class="hljs-type">long</span> mult = <span class="hljs-built_in">qPow</span>(base, len - <span class="hljs-number">1</span>);<br>ha = ((ha - A[i - len] * mult % mod + mod) % mod * base + A[i]);<br><br><span class="hljs-comment">// 前缀哈希 提取一段距离 可以选择两组哈希防止冲突、</span><br><span class="hljs-comment">// 常用base 37 171 MOD 1e9 + 7</span><br><span class="hljs-function">vector&lt;<span class="hljs-type">long</span> <span class="hljs-type">long</span>&gt; <span class="hljs-title">f</span><span class="hljs-params">(n + <span class="hljs-number">1</span>)</span>, <span class="hljs-title">P</span><span class="hljs-params">(n + <span class="hljs-number">1</span>)</span></span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) f[i] = (f[i - <span class="hljs-number">1</span>] * <span class="hljs-number">171</span> + s[i - <span class="hljs-number">1</span>]) % MOD;<br>P[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) P[i] = P[i - <span class="hljs-number">1</span>] * <span class="hljs-number">171</span> % MOD;<br><span class="hljs-type">long</span> <span class="hljs-type">long</span> h = (f[i + mid - <span class="hljs-number">1</span>] - f[i - <span class="hljs-number">1</span>] * P[mid] % MOD + MOD) % MOD;<br><br></code></pre></td></tr></table></figure>
<h2 id="prob">Prob+</h2>
<h3 id="entropy">entropy</h3>
<p><a href="../view/prob.md#entropy">entropy</a> - as information
(信息量) ！可能的输出 - 匹配可能的结果</p>
<p><a target="_blank" rel="noopener" href="https://www.av8n.com/physics/twelve-coins.htm">The
Twelve-Coins Puzzles</a></p>
<ol type="1">
<li><p>calc the entropy(information) &lt;= 实验的信息</p></li>
<li><p>确保每一步实验后的信息量仍然满足上述条件，注意分堆后，保留上次称重的信息，只要选中一个砝码，就知道是更重的/更轻的，即使还没有选中，但此时只需要选出砝码的信息量即可。</p></li>
<li><p>transmit to a code -&gt; the result table RRR RRB ...</p></li>
<li><p>矛盾条件 若一个corn为RRB, 那么若他较轻，则会出现LLB的情况</p>
<p>even though it appears we have 27 codewords, this approach has no
chance of handling more than 13 coins.</p>
<p>一一对应每一个硬币 - 假设实验为定值</p></li>
</ol>
<p><img src="/images/information-1.png" srcset="/img/loading.gif" lazyload alt="image-20220326205757610" style="zoom:50%;" /></p>
<p><a target="_blank" rel="noopener" href="https://coady.github.io/posts/coin-balance/">twelve coin
code</a></p>
<h3 id="编码">编码</h3>
<p>generate add 0 / add 1<br />
map(instead of recursive)<br />
l-1238 circulate from start<br />
$ i xor (i &gt;&gt; 1)xor start$</p>
<ol type="1">
<li><p>if a ^ b = c ^ b a == b</p></li>
<li><p>a,b at most one bit different, res is still gray code</p></li>
<li><p>num to grey - gray to num</p></li>
</ol>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># num to gray </span><br>i ^ (i &gt;&gt; <span class="hljs-number">1</span>)  <br><span class="hljs-comment"># gray to num 与n的每一位亦或 </span><br>res = n<br><span class="hljs-keyword">while</span> n &gt; <span class="hljs-number">0</span>:  <br>	n &gt;&gt; = <span class="hljs-number">1</span> <br>    res ^= n<br><span class="hljs-comment"># num to gray</span><br></code></pre></td></tr></table></figure></p>
<h3 id="组合-1">组合</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// ncr = (n - 1)Cr + (n - c)C(r - 1)</span><br><span class="hljs-comment">// 未选取特定元素的组合 - 选取了特定元素的组合</span><br><span class="hljs-comment">// ncr</span><br><span class="hljs-function"><span class="hljs-type">long</span> <span class="hljs-type">long</span> <span class="hljs-title">C</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">int</span> r)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span>(r &gt; n - r) r = n - r; <span class="hljs-comment">// because C(n, r) == C(n, n - r)</span><br>    <span class="hljs-type">long</span> <span class="hljs-type">long</span> ans = <span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> i;<br>    <span class="hljs-keyword">for</span>(i = <span class="hljs-number">1</span>; i &lt;= r; i++) &#123;<br>        ans *= n - r + i;<br>        ans /= i;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><span class="hljs-meta"># <span class="hljs-keyword">define</span> MAX 100 <span class="hljs-comment">// assuming we need first 100 rows</span></span><br><span class="hljs-type">long</span> <span class="hljs-type">long</span> triangle[MAX + <span class="hljs-number">1</span>][MAX + <span class="hljs-number">1</span>];<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">makeTriangle</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> i, j;<br><br>    <span class="hljs-comment">// initialize the first row</span><br>    triangle[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>; <span class="hljs-comment">// C(0, 0) = 1</span><br><br>    <span class="hljs-keyword">for</span>(i = <span class="hljs-number">1</span>; i &lt; MAX; i++) &#123;<br>        triangle[i][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>; <span class="hljs-comment">// C(i, 0) = 1</span><br>        <span class="hljs-keyword">for</span>(j = <span class="hljs-number">1</span>; j &lt;= i; j++) &#123;<br>            triangle[i][j] = triangle[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>] + triangle[i - <span class="hljs-number">1</span>][j];<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">long</span> <span class="hljs-type">long</span> <span class="hljs-title">C</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">int</span> r)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> triangle[n][r];<br>&#125;<br></code></pre></td></tr></table></figure>
<p>l-491 increasing subsequences<br />
check duplicate same value<br />
the former is selected and the latter is not x<br />
or with hash code</p>
<p>** l-458 poor pigs<br />
combination C(i, j) = C(i - 1, j) + C(i - 1, j - 1);(add new i)</p>
<h3 id="random">random</h3>
<p>l-384 shuffle an array<br />
fishier-yates shuffle<br />
i(0 - n) j = i + rand()%(len - i) swap(i, j)<br />
each position<br />
P(not selceted) % P(selceted by jth)<br />
correctness proof<br />
has n! conditions(through condition probability)<br />
<span class="math display">\[
P(x&#39;(i) = b_i \quad \text{for 1 $\le$ i $\le$ n}) = \frac{1}{n!}
\]</span> motekalo<br />
count times in each pos</p>
<h2 id="几何">几何</h2>
<h3 id="k值">K值</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 多次分类</span><br><span class="hljs-comment">// 归一化 + 第一个复数为0 ...</span><br>ll d1 = x1 - x2, d2 = y1 - y2;<br>ll sign = (d1 &gt;= <span class="hljs-number">0</span>) ^ (d2 &gt;= <span class="hljs-number">0</span>) ? <span class="hljs-number">-1</span> : <span class="hljs-number">1</span>;<br>ll fac = __gcd(<span class="hljs-built_in">abs</span>(d1), <span class="hljs-built_in">abs</span>(d2));<br>ll x = sign * <span class="hljs-built_in">abs</span>(d1)/fac, ll y = <span class="hljs-built_in">abs</span>(d2)/fac;<br><br><span class="hljs-keyword">if</span> (x == <span class="hljs-number">0</span>) &#123;<br>    y = <span class="hljs-number">1</span>;<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (y == <span class="hljs-number">0</span>) &#123;<br>    x = <span class="hljs-number">1</span>;<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-keyword">if</span> (y &lt; <span class="hljs-number">0</span>) &#123;<br>        x = -x;<br>        y = -y;<br>    &#125;<br>    <span class="hljs-comment">// 提高精度</span><br>    <span class="hljs-type">int</span> gcdXY = <span class="hljs-built_in">gcd</span>(<span class="hljs-built_in">abs</span>(x), <span class="hljs-built_in">abs</span>(y));<br>    x /= gcdXY, y /= gcdXY;<br>&#125;<br><br><span class="hljs-comment">// 防止溢出</span><br>ll sign = (d1 ^ d2) &gt;= <span class="hljs-number">0</span> ? <span class="hljs-number">1</span> : <span class="hljs-number">-1</span>;<br><span class="hljs-comment">// -1 0 1 0 同属于一种 ！0的正负性单独讨论</span><br>sign = (d1 == <span class="hljs-number">0</span> || d2 == <span class="hljs-number">0</span>) ? <span class="hljs-number">1</span> : sign;<br>ll fac = __gcd(<span class="hljs-built_in">abs</span>(d1), <span class="hljs-built_in">abs</span>(d2));<br>ll x = sign * <span class="hljs-built_in">abs</span>(d1)/fac, y = <span class="hljs-built_in">abs</span>(d2)/fac;<br><br><span class="hljs-comment">// k1 * b2 == k2 * b1 判断平行</span><br><span class="hljs-comment">// (x1 - x0)(y3 - y2) = (y1 - y0)(x3 - x2);</span><br><span class="hljs-comment">// ax + by + c = 0 -&gt; a1 * b2 = a2 * b1 c</span><br><span class="hljs-comment">// y - y1 = (y2 - y1)/(x2 - x1) * (x - x1)</span><br></code></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br></pre></td><td class="code"><pre><code class="hljs c++">M_PI<br><span class="hljs-type">double</span> eps = <span class="hljs-number">1e-6</span>;<br><span class="hljs-comment">// 向量</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">V</span> &#123;<br>    <span class="hljs-type">double</span> x, y;<br>    <span class="hljs-built_in">V</span>() : <span class="hljs-built_in">x</span>(<span class="hljs-number">0</span>), <span class="hljs-built_in">y</span>(<span class="hljs-number">0</span>) &#123;&#125;<br>    <span class="hljs-built_in">V</span>(<span class="hljs-type">double</span> a, <span class="hljs-type">double</span> b) : <span class="hljs-built_in">x</span>(a), <span class="hljs-built_in">y</span>(b) &#123;&#125;<br>&#125;;<br><br><span class="hljs-comment">// 常见运算符</span><br><span class="hljs-keyword">inline</span> V <span class="hljs-keyword">operator</span> * (<span class="hljs-type">const</span> <span class="hljs-type">double</span> &amp;x,<span class="hljs-type">const</span> V &amp;a)&#123;<span class="hljs-keyword">return</span> (V)&#123;a.x*x,a.y*x&#125;;&#125;<br><span class="hljs-comment">// 点积、叉积 |a|*|b| cos / sin(可代表面积)</span><br><span class="hljs-keyword">inline</span> <span class="hljs-type">double</span> <span class="hljs-keyword">operator</span> * (<span class="hljs-type">const</span> V &amp;a,<span class="hljs-type">const</span> V &amp;b)&#123;<span class="hljs-keyword">return</span> a.x*b.x+a.y*b.y;&#125;<br><span class="hljs-keyword">inline</span> <span class="hljs-type">double</span> <span class="hljs-keyword">operator</span> ^ (<span class="hljs-type">const</span> V &amp;a,<span class="hljs-type">const</span> V &amp;b)&#123;<span class="hljs-keyword">return</span> a.x*b.y-a.y*b.x;&#125;<br><br><span class="hljs-comment">// 相等</span><br><span class="hljs-keyword">inline</span> <span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span> == (<span class="hljs-type">const</span> V &amp;a,<span class="hljs-type">const</span> V &amp;b)&#123;<span class="hljs-keyword">return</span> <span class="hljs-built_in">abs</span>(a.x-b.x)&lt;eps&amp;&amp;<span class="hljs-built_in">abs</span>(a.y-b.y)&lt;eps;&#125;<br><span class="hljs-keyword">inline</span> <span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span> != (<span class="hljs-type">const</span> V &amp;a,<span class="hljs-type">const</span> V &amp;b)&#123;<span class="hljs-keyword">return</span> !(a==b);&#125;<br><br><span class="hljs-comment">// 长度</span><br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">double</span> <span class="hljs-title">len</span><span class="hljs-params">(<span class="hljs-type">const</span> V &amp;a)</span></span>&#123;<span class="hljs-keyword">return</span> <span class="hljs-built_in">sqrt</span>(a.x*a.x+a.y*a.y);&#125;<br><br><span class="hljs-comment">// 角度</span><br><span class="hljs-comment">// 两向量与原点的夹角</span><br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">double</span> <span class="hljs-title">angle</span><span class="hljs-params">(<span class="hljs-type">const</span> V &amp;a,<span class="hljs-type">const</span> V &amp;b)</span> </span>&#123; <span class="hljs-keyword">return</span> <span class="hljs-built_in">acos</span>(a * b / <span class="hljs-built_in">len</span>(a) / <span class="hljs-built_in">len</span>(b)); &#125;<br><br><span class="hljs-comment">// 钝角</span><br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">bool</span> <span class="hljs-title">dun</span><span class="hljs-params">(<span class="hljs-type">const</span> V &amp;a,<span class="hljs-type">const</span> V &amp;b,<span class="hljs-type">const</span> V &amp;c)</span></span>&#123;<span class="hljs-keyword">return</span> ((b-a)*(c-a))&lt;-eps;&#125;<span class="hljs-comment">//angle:BAC</span><br><br><span class="hljs-comment">// atan2 直接得到向量与x轴的角度 -pi 到 pi</span><br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">double</span> <span class="hljs-title">angle</span><span class="hljs-params">(<span class="hljs-type">double</span> x, <span class="hljs-type">double</span> y)</span> </span>&#123;<span class="hljs-keyword">return</span> <span class="hljs-built_in">atan2</span>(y, x);&#125;<br><br><span class="hljs-comment">// 旋转 t为旋转角度 (x + yi) × (cosθ + sinθi) 逆时针旋转</span><br><span class="hljs-function"><span class="hljs-keyword">inline</span> V <span class="hljs-title">rotate</span><span class="hljs-params">(<span class="hljs-type">const</span> V &amp;o, <span class="hljs-type">double</span> t)</span></span>&#123;<br>  	<span class="hljs-type">double</span> s=<span class="hljs-built_in">sin</span>(t), c=<span class="hljs-built_in">cos</span>(t);<br>  	<span class="hljs-keyword">return</span> (V)&#123;o.x*c - o.y*s, o.x*s + o.y*c&#125;;<br>&#125;<br><br><span class="hljs-comment">// 表示直线方程</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">line</span>&#123;<br>  	<span class="hljs-comment">// 方向 a点 b点</span><br> 	V d,a,b;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-keyword">inline</span> line <span class="hljs-title">trans</span><span class="hljs-params">(<span class="hljs-type">const</span> V &amp;a,<span class="hljs-type">const</span> V &amp;b)</span></span>&#123;<span class="hljs-comment">//given points</span><br>  <span class="hljs-function">V <span class="hljs-title">dd</span><span class="hljs-params">(b.x-a.x, b.y-a.y)</span></span>;<br>  dd = dd / <span class="hljs-built_in">len</span>(dd);<br>  <span class="hljs-keyword">return</span> (line) &#123;dd, a, b&#125;;<br>&#125;<br><br><span class="hljs-comment">// 方向向量叉积为0</span><br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">bool</span> <span class="hljs-title">gongxian</span><span class="hljs-params">(<span class="hljs-type">const</span> line &amp;a,<span class="hljs-type">const</span> line &amp;b)</span> </span>&#123;<span class="hljs-keyword">return</span> <span class="hljs-built_in">abs</span>(a.d ^ b.d)&lt;eps;&#125;<br><br><span class="hljs-comment">// 假设为直线，判断交点在不在线段上</span><br><span class="hljs-function"><span class="hljs-keyword">inline</span> V <span class="hljs-title">jiaodian</span><span class="hljs-params">(line u, line v)</span></span>&#123;<br>  	<span class="hljs-comment">// 不共线 </span><br>	<span class="hljs-type">double</span> k = ((v.a - u.a) ^ v.d) / (u.d ^ v.d);<br>	<span class="hljs-keyword">return</span> u.a + (k * u.d);<br>&#125;<br><br><span class="hljs-comment">// 点到直线的距离</span><br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">double</span> <span class="hljs-title">dis</span><span class="hljs-params">(<span class="hljs-type">const</span> line &amp;l,<span class="hljs-type">const</span> V &amp;o,<span class="hljs-type">int</span> op=<span class="hljs-number">0</span>)</span></span>&#123;<span class="hljs-comment">//op=0:dis on line,op=1:dis on segment</span><br>  <span class="hljs-keyword">if</span>(op&amp;&amp;(<span class="hljs-built_in">dun</span>(l.a,o,l.b)||<span class="hljs-built_in">dun</span>(l.b,o,l.a))) <span class="hljs-keyword">return</span> <span class="hljs-built_in">min</span>(<span class="hljs-built_in">len</span>(o-l.a),<span class="hljs-built_in">len</span>(o-l.b));<br> 	<span class="hljs-comment">// 等面积 - 叉积求面积 </span><br>	<span class="hljs-comment">// 向量叉积 求三角形 判断共线</span><br> 	<span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-built_in">abs</span>((o-l.a)^(o-l.b))/<span class="hljs-built_in">len</span>(l.a-l.b);<br>&#125;<br><br><span class="hljs-comment">// 椭圆基本性质 x^2 / a^2+ y^2/ b^2 = 1</span><br><span class="hljs-comment">// 三点共线 - 行列式求三角形面积，再判断是否为0. / 点到直接的三角形， 判断是否共线</span><br><br><span class="hljs-keyword">inline</span> V <span class="hljs-keyword">operator</span>+(<span class="hljs-type">const</span> V &amp;a, <span class="hljs-type">const</span> V &amp;b) &#123; <span class="hljs-keyword">return</span> <span class="hljs-built_in">V</span>(a.x + b.x, a.y + b.y);&#125;<br><span class="hljs-keyword">inline</span> V <span class="hljs-keyword">operator</span>-(<span class="hljs-type">const</span> V &amp;a, <span class="hljs-type">const</span> V &amp;b) &#123;<span class="hljs-keyword">return</span> <span class="hljs-built_in">V</span>(a.x - b.x, a.y - b.y);&#125;<br><span class="hljs-keyword">inline</span> V <span class="hljs-keyword">operator</span>/(<span class="hljs-type">const</span> V &amp;a, <span class="hljs-type">const</span> <span class="hljs-type">double</span> b) &#123;<span class="hljs-keyword">return</span> <span class="hljs-built_in">V</span>(a.x / b, a.y / b);&#125;<br><span class="hljs-keyword">inline</span> V <span class="hljs-keyword">operator</span>*(<span class="hljs-type">const</span> V &amp;a, <span class="hljs-type">const</span> <span class="hljs-type">double</span> b) &#123;<span class="hljs-keyword">return</span> <span class="hljs-built_in">V</span>(a.x * b, a.y * b);&#125;<br><span class="hljs-type">double</span> <span class="hljs-keyword">operator</span>*(<span class="hljs-type">const</span> V &amp;a, <span class="hljs-type">const</span> V &amp;b) &#123; <span class="hljs-keyword">return</span> a.x * b.x + a.y * b.y;&#125;<br><span class="hljs-type">double</span> <span class="hljs-keyword">operator</span>^(<span class="hljs-type">const</span> V &amp;a, <span class="hljs-type">const</span> V &amp;b) &#123; <span class="hljs-keyword">return</span> a.x * b.y - a.y * b.x;&#125;<br><span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">len</span><span class="hljs-params">(<span class="hljs-type">const</span> V&amp; a)</span> </span>&#123;<span class="hljs-keyword">return</span> <span class="hljs-built_in">sqrt</span>(a.x * a.x + a.y *a.y);&#125;<br><br><span class="hljs-function">V <span class="hljs-title">get_intersection</span><span class="hljs-params">(line &amp;a, line &amp;b)</span> </span>&#123;<br>    <span class="hljs-type">double</span> k = ((b.a - a.a) ^ b.d) / (a.d ^ b.d);<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">V</span>(a.a + a.d * k);<br>&#125;<br><br><span class="hljs-function">line <span class="hljs-title">transform</span><span class="hljs-params">(<span class="hljs-type">const</span> V &amp;a, <span class="hljs-type">const</span> V &amp;b)</span></span>&#123;<br>    V dd = <span class="hljs-built_in">V</span>(b.x - a.x, b.y - a.y);<br>    dd = dd / <span class="hljs-built_in">len</span>(dd);<br>    <span class="hljs-keyword">return</span> line&#123;dd, a, b&#125;;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">is_para</span><span class="hljs-params">(<span class="hljs-type">const</span> line &amp;a, <span class="hljs-type">const</span> line &amp;b)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">abs</span>(a.d ^ b.d) &lt; eps;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">is_Same</span><span class="hljs-params">(<span class="hljs-type">const</span> line &amp;a, <span class="hljs-type">const</span> line &amp;b)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">abs</span>((b.a - a.a) ^ (b.a - a.b)) &lt; eps;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">is_inline</span><span class="hljs-params">(<span class="hljs-type">const</span> line &amp;a, <span class="hljs-type">const</span> V &amp;b)</span> </span>&#123;<br>    <span class="hljs-type">double</span> l = a.a.x, r = a.b.x;<br>    <span class="hljs-type">bool</span> res = <span class="hljs-literal">false</span>;<br>    <span class="hljs-keyword">if</span> (l &gt; r) <span class="hljs-built_in">swap</span>(l, r);<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">abs</span>(l - r) &gt; eps) &#123;<br>        res = res | (l &lt;= b.x &amp;&amp; b.x &lt;= r);<br>    &#125;<br>    <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-type">double</span> ll = a.a.y, rr = a.b.y;<br>        <span class="hljs-keyword">if</span> (ll &gt; rr) <span class="hljs-built_in">swap</span>(ll, rr);<br>        res = res | (ll &lt;= b.y &amp;&amp; b.y &lt;= rr);<br>    &#125;<br>    <span class="hljs-keyword">return</span> res;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">double</span>&gt; <span class="hljs-title">intersection</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; start1, vector&lt;<span class="hljs-type">int</span>&gt;&amp; end1, vector&lt;<span class="hljs-type">int</span>&gt;&amp; start2, vector&lt;<span class="hljs-type">int</span>&gt;&amp; end2)</span> </span>&#123;<br>        <span class="hljs-function">V <span class="hljs-title">a</span><span class="hljs-params">(start1[<span class="hljs-number">0</span>], start1[<span class="hljs-number">1</span>])</span>, <span class="hljs-title">b</span><span class="hljs-params">(end1[<span class="hljs-number">0</span>], end1[<span class="hljs-number">1</span>])</span>, <span class="hljs-title">c</span><span class="hljs-params">(start2[<span class="hljs-number">0</span>], start2[<span class="hljs-number">1</span>])</span>, <span class="hljs-title">d</span><span class="hljs-params">(end2[<span class="hljs-number">0</span>], end2[<span class="hljs-number">1</span>])</span></span>;<br>        <span class="hljs-keyword">if</span> (a.x &gt; b.x) <span class="hljs-built_in">swap</span>(a, b);<br>        <span class="hljs-keyword">if</span> (c.x &gt; d.x) <span class="hljs-built_in">swap</span>(c, d);<br>        <span class="hljs-keyword">if</span> (a.x == b.x) <span class="hljs-keyword">if</span> (a.y &gt; b.y) <span class="hljs-built_in">swap</span>(a, b);<br>        <span class="hljs-keyword">if</span> (c.x == d.x) <span class="hljs-keyword">if</span> (c.y &gt; d.y) <span class="hljs-built_in">swap</span>(c, d);<br>        <span class="hljs-keyword">if</span> (a.x &gt; c.x) &#123;<br>            <span class="hljs-built_in">swap</span>(a, c);<br>            <span class="hljs-built_in">swap</span>(b, d);<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (a.x == c.x) &#123;<br>            <span class="hljs-keyword">if</span> (a.y &gt; c.y) &#123;<br>                <span class="hljs-built_in">swap</span>(a, c);<br>                <span class="hljs-built_in">swap</span>(b, d);<br>            &#125;<br>        &#125;<br><br>        line l1 = <span class="hljs-built_in">transform</span>(a, b);<br>        line l2 = <span class="hljs-built_in">transform</span>(c, d);<br>        vector&lt;<span class="hljs-type">double</span>&gt; ans;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">is_para</span>(l1, l2)) &#123;<br>            <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">is_Same</span>(l1, l2)) <span class="hljs-keyword">return</span> ans;<br>            <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-keyword">if</span> (c.x &gt; b.x) <span class="hljs-keyword">return</span> ans;<br>                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a.x != c.x) &#123;<br>                    ans = &#123;c.x, c.y&#125;;<br>                    <span class="hljs-keyword">return</span> ans;<br>                &#125;<br>                <span class="hljs-keyword">if</span> (a.x == c.x) &#123;<br>                    <span class="hljs-keyword">if</span> (c.y &gt; b.y) <span class="hljs-keyword">return</span> ans;<br>                    <span class="hljs-keyword">else</span> &#123;<br>                        ans = &#123;c.x, c.y&#125;;<br>                        <span class="hljs-keyword">return</span> ans;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">else</span> &#123;<br>            V target = <span class="hljs-built_in">get_intersection</span>(l1, l2);<br>            <span class="hljs-type">bool</span> r1 = <span class="hljs-built_in">is_inline</span>(l1, target);<br>            <span class="hljs-type">bool</span> r2 = <span class="hljs-built_in">is_inline</span>(l2, target); <br>            <span class="hljs-keyword">if</span> (r1 &amp;&amp; r2) &#123;<br>                ans = &#123;target.x, target.y&#125;;<br>                <span class="hljs-keyword">return</span> ans;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>
<h2 id="basic">basic</h2>
<h3 id="define">define</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">// #define int long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ll long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> vi vector<span class="hljs-string">&lt;ll&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> vvi vector<span class="hljs-string">&lt;vi&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rep(i, a, b) for(auto i = (a); (i) &lt; (b); (i)++)</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rrep(i, b, a) for (auto i = (b); (i) &gt; (a); (i)--)</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> fastio std::ios_base::sync_with_stdio(false); cin.tie(NULL);</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> all(v) (v).begin(), (v).end()</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> sz(v) (int)(v).size()</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ump unordered_map<span class="hljs-string">&lt;ll, ll&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> pub push_back </span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> pob pop_back</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> arr array<span class="hljs-string">&lt;ll, 3&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> pii pair<span class="hljs-string">&lt;ll, ll&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> fi first</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> se second</span><br></code></pre></td></tr></table></figure>
<h3 id="uniquecountfindrotate">unique/count/find/rotate</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c++">nums.<span class="hljs-built_in">erase</span>(<span class="hljs-built_in">unique</span>(nums.<span class="hljs-built_in">begin</span>(), nums.<span class="hljs-built_in">end</span>()), nums.<span class="hljs-built_in">end</span>());<br><span class="hljs-keyword">auto</span> cnt = <span class="hljs-built_in">count</span>(<span class="hljs-built_in">all</span>(s),<span class="hljs-string">&#x27;1&#x27;</span>);<br>std::<span class="hljs-type">size_t</span> found = str.<span class="hljs-built_in">find</span>(str2);<br><span class="hljs-built_in">find</span>(vec.<span class="hljs-built_in">begin</span>(), vec.<span class="hljs-built_in">end</span>(), item);<br><br><span class="hljs-comment">// 1 2 3 4 5 6 7 8 9 -&gt; 4 5 6 7 8 9 1 2 3</span><br>std::<span class="hljs-built_in">rotate</span>(myvector.<span class="hljs-built_in">begin</span>(),myvector.<span class="hljs-built_in">begin</span>()+<span class="hljs-number">3</span>,myvector.<span class="hljs-built_in">end</span>());<br><br><span class="hljs-built_in">accumulate</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), initial_sum);<br></code></pre></td></tr></table></figure>
<h3 id="初始化">初始化</h3>
<p><strong>使用引用接收参数/返回值</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// debug</span><br><span class="hljs-comment">// +-DLOCAL</span><br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> LOCAL</span><br>    <span class="hljs-built_in">freopen</span>(<span class="hljs-string">&quot;data.in&quot;</span>, <span class="hljs-string">&quot;r&quot;</span>, stdin);<br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><span class="hljs-comment">// 引用部分</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstdio&gt;</span> #<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;climits&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> debug(a) cout &lt;&lt; #a &lt;&lt; <span class="hljs-string">&quot; = &quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> mod(x) (x) % MOD</span><br><span class="hljs-comment">// 声明</span><br><span class="hljs-keyword">using</span> ULL = <span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span>;<br><span class="hljs-keyword">typedef</span> ;<br><br><span class="hljs-comment">// arr</span><br><span class="hljs-comment">// INT_MAX注意溢出 10..9</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> INF = <span class="hljs-number">0x3f3f3f3f</span>;<br><span class="hljs-comment">// 初始化 </span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> maxn = <span class="hljs-number">1001</span>;<br><span class="hljs-comment">// INT_MAX注意溢出 10..9</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> INF = <span class="hljs-number">0x3f3f3f3f</span>;<br><span class="hljs-comment">// -1 全为1 0 0x3f</span><br><span class="hljs-type">int</span> w[maxn][maxn];<br><span class="hljs-built_in">fill</span>(&amp;w[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>], &amp;w[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] + maxn * maxn, INF);<br><span class="hljs-built_in">memset</span>(w, <span class="hljs-number">-1</span>, <span class="hljs-built_in">sizeof</span>(w));<br><br><span class="hljs-comment">// vector</span><br><span class="hljs-comment">// Using assignment operator to copy one</span><br>vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">vec</span>(m, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; (n, <span class="hljs-number">0</span>));<br>vect2 = vect1;<br></code></pre></td></tr></table></figure>
<h3 id="指针-1">指针</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 回文串反向</span><br><span class="hljs-built_in">string</span>(prefix + prefix.<span class="hljs-built_in">rbegin</span>() + (len &amp; <span class="hljs-number">1</span>), prefix.<span class="hljs-built_in">rend</span>());<br><br><span class="hljs-comment">// 距离 注意set O(n)</span><br><span class="hljs-built_in">distance</span>(a.begin, <span class="hljs-built_in">lower_bound</span>(c));<br><br><span class="hljs-comment">// List</span><br><span class="hljs-comment">// doubly linked list</span><br>List&lt;<span class="hljs-type">int</span>&gt; a;<br><span class="hljs-comment">// dynamic array</span><br>deque&lt;<span class="hljs-type">int</span>&gt; b;<br><br><span class="hljs-comment">// 声明迭代器</span><br>list&lt;Node&gt;::iterator cur = m[key];<br></code></pre></td></tr></table></figure>
<h3 id="赋值删除">赋值/删除</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">using</span> VI=vector&lt;<span class="hljs-type">int</span>&gt;;<br><span class="hljs-keyword">using</span> VLL=vector&lt;LL&gt;;<br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> next(p) (p == n-1 ? 0 : p + 1)</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> prev(p) (p == 0 ? n - 1 : p - 1)</span><br><br><span class="hljs-comment">// ull a &gt; -1 恒成立</span><br><span class="hljs-comment">// val to bool !2-false !!2 = true</span><br>!!<span class="hljs-number">2</span>  <br><span class="hljs-comment">// 赋值并清空</span><br>a = <span class="hljs-built_in">move</span>(b);<br><br><span class="hljs-comment">// 浮点计算 不用double 前置1.0即可</span><br><span class="hljs-type">double</span> cx1 = <span class="hljs-number">1.0</span> * (b[r] - b[p]) / (k[r] - k[p]);<br><span class="hljs-type">double</span> x_min = <span class="hljs-number">1e100</span>, x_max = <span class="hljs-number">-1e100</span>;<br><span class="hljs-type">double</span> y_min = <span class="hljs-number">1e100</span>, y_max = <span class="hljs-number">-1e100</span>;<br><br><span class="hljs-comment">// swap </span><br><span class="hljs-built_in">swap</span>(a, b);<br><br><span class="hljs-comment">// unique</span><br><span class="hljs-built_in">sort</span>(nums.<span class="hljs-built_in">begin</span>(),nums.<span class="hljs-built_in">end</span>());<br><span class="hljs-comment">// unique array and return the last interator</span><br>nums.<span class="hljs-built_in">erase</span>(<span class="hljs-built_in">unique</span>(nums.<span class="hljs-built_in">begin</span>(), nums.<span class="hljs-built_in">end</span>()), nums.<span class="hljs-built_in">end</span>());<br><br><span class="hljs-comment">// map</span><br>it = mymap.<span class="hljs-built_in">find</span>(<span class="hljs-string">&#x27;b&#x27;</span>);<br><span class="hljs-keyword">if</span> (it != mymap.<span class="hljs-built_in">end</span>())<br>    mymap.<span class="hljs-built_in">erase</span> (it);<br><br><span class="hljs-comment">// multiset 只删一个</span><br>ms.<span class="hljs-built_in">erase</span>(ms.<span class="hljs-built_in">find</span>(v));<br><br><span class="hljs-comment">// 获取前值</span><br><span class="hljs-comment">// decomposition declaration</span><br><span class="hljs-keyword">auto</span> [u, mask, dist] = q.<span class="hljs-built_in">front</span>();<br><span class="hljs-comment">// 栈入</span><br>q.<span class="hljs-built_in">emplace</span>(i, <span class="hljs-number">1</span> &lt;&lt; i, <span class="hljs-number">0</span>);<br><span class="hljs-comment">// array 代替tuple</span><br>array&lt;<span class="hljs-type">int</span>, 3&gt; p = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125;;<br><span class="hljs-comment">// 从小到大</span><br>priority_queue&lt;arr, vector&lt;arr&gt;, greater&lt;arr&gt;&gt; pq;<br><br><br><span class="hljs-comment">// 合并集合</span><br>pre[next].<span class="hljs-built_in">insert</span>(pre[course].<span class="hljs-built_in">begin</span>(),pre[course].<span class="hljs-built_in">end</span>());<br><br><span class="hljs-comment">// function </span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;functional&gt;</span></span><br><span class="hljs-comment">// 省去全局变量</span><br>function&lt;<span class="hljs-type">void</span>(<span class="hljs-type">int</span>, <span class="hljs-type">int</span>)&gt; dfs = [&amp;](<span class="hljs-type">int</span> cur, <span class="hljs-type">int</span> pre) &#123;<br>    cout &lt;&lt; <span class="hljs-number">1</span> &lt;&lt; endl;<br>&#125;;<br></code></pre></td></tr></table></figure>
<h3 id="逻辑">逻辑</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// while 循环</span><br><span class="hljs-keyword">while</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n;) &#123;<br>    <span class="hljs-type">int</span> tmp = i;<br>    <span class="hljs-keyword">while</span>(tmp &lt; n &amp;&amp; a[i] == a[tmp]) tmp++;<br>&#125;<br><span class="hljs-comment">// for 循环</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>, j = <span class="hljs-number">0</span>; i &lt; n; i++);<br><br><span class="hljs-comment">// goto  </span><br><span class="hljs-keyword">goto</span> end;<br>end:;<br><br><span class="hljs-comment">// sort</span><br>order = <span class="hljs-built_in">VI</span>(n);<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; n;i++)order[i] = i;<br><span class="hljs-comment">// order与index</span><br><span class="hljs-built_in">sort</span>(order.<span class="hljs-built_in">begin</span>(),order.<span class="hljs-built_in">end</span>(),[&amp;](<span class="hljs-type">int</span> x,<span class="hljs-type">int</span> y)&#123;<span class="hljs-keyword">return</span> a[x] &gt; a[y];&#125;);<br><br><br></code></pre></td></tr></table></figure>
<h3 id="数字">数字</h3>
<ol type="1">
<li><p>float/bit表示</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 0x 16进制 0b 2-bit 0o 8-bit  </span><br><span class="hljs-comment">// 2^3 注意10^5有六位</span><br><span class="hljs-number">0x1e5</span>,<span class="hljs-number">0x1</span>p3,<span class="hljs-number">1e5</span>;<br><br><span class="hljs-comment">// 奇数 偶数 -&gt; 已 a &amp; 1 来表示</span><br>arr[a&amp;<span class="hljs-number">1</span>] = <span class="hljs-number">1</span>;<br><br><span class="hljs-comment">// ull (1 &lt;&lt; 64) - 1 bit</span><br>INT_MAX = (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">31</span>) - <span class="hljs-number">1</span><br>INT_MIN = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">31</span> (~<span class="hljs-number">0</span>);<br><span class="hljs-comment">// !注意通过1ll来移动</span><br>Long = <span class="hljs-number">1ll</span> &lt;&lt; <span class="hljs-number">31</span>;<br><span class="hljs-comment">// 通过stoull转化</span><br><br><span class="hljs-type">char</span> buffer[<span class="hljs-number">20</span>];<br><span class="hljs-built_in">sprintf</span>(buffer, <span class="hljs-string">&quot;%.2f&quot;</span>, a); <span class="hljs-comment">//...</span><br><br><span class="hljs-built_in">sscanf</span>(s.<span class="hljs-built_in">c_str</span>(), <span class="hljs-string">&quot;farmat&quot;</span>, &amp;num); <br><span class="hljs-comment">// round - (int)(x + 0.5)</span><br><span class="hljs-comment">// round(x * 100) / 100 - 四舍五入</span><br></code></pre></td></tr></table></figure></li>
<li><p>溢出</p>
<p><strong>abs/max出现溢出</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// ! 防止溢出 </span><br><span class="hljs-built_in">llabs</span>();<br><br><span class="hljs-comment">// c++对负数取模不同于python</span><br><span class="hljs-comment">// python -1 // 10 = -1 向负无穷取整，C向0取整</span><br>a == (a / b * b) + a % b;  <br><span class="hljs-comment">// ture mudulo python</span><br><span class="hljs-number">-1</span> % <span class="hljs-number">10</span> = <span class="hljs-number">9</span>;<br><span class="hljs-comment">// C的取整</span><br><span class="hljs-number">-1</span> % <span class="hljs-number">10</span> = <span class="hljs-number">-1</span>;<br><br><span class="hljs-comment">// size_t(0uz) greater than 0 unsigned  </span><br><span class="hljs-comment">// unsigned int overflow 从0重新开始</span><br></code></pre></td></tr></table></figure></li>
</ol>
<h3 id="字符串">字符串</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// transform </span><br><span class="hljs-built_in">stoi</span>();<br><span class="hljs-comment">// string to ull</span><br><span class="hljs-comment">// 0开始 的长度为x的子串</span><br><span class="hljs-built_in">stoull</span>(n.<span class="hljs-built_in">substr</span>(<span class="hljs-number">0</span>, x));<br><span class="hljs-comment">// num to string</span><br><span class="hljs-built_in">to_string</span>();<br><span class="hljs-comment">// 回文</span><br><span class="hljs-built_in">string</span>(prefix + prefix.<span class="hljs-built_in">rbegin</span>() + (len &amp; <span class="hljs-number">1</span>), prefix.<span class="hljs-built_in">rend</span>());<br><br><span class="hljs-comment">// 通过内置string函数代替数字哈希 int + &#x27;|&#x27;</span><br>unordered_set&lt;string&gt; us;<br><span class="hljs-comment">// find 寻找第一个出现字符串的位置</span><br>code.<span class="hljs-built_in">find</span>(string, start_pos);<br></code></pre></td></tr></table></figure>
<h3 id="custom">custom</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// compare</span><br><span class="hljs-comment">// 注意不能小于等于</span><br><span class="hljs-built_in">sort</span>(arr.<span class="hljs-built_in">begin</span>(), arr.<span class="hljs-built_in">end</span>(), [](<span class="hljs-type">const</span> vector&lt;<span class="hljs-type">int</span>&gt; &amp;a, <span class="hljs-type">const</span> vector&lt;<span class="hljs-type">int</span>&gt; &amp;b) &#123;<br>    <span class="hljs-keyword">if</span> (a[<span class="hljs-number">0</span>] == b[<span class="hljs-number">0</span>]) <span class="hljs-keyword">return</span> a[<span class="hljs-number">1</span>] &lt; b[<span class="hljs-number">1</span>];<br>    <span class="hljs-keyword">return</span> a[<span class="hljs-number">0</span>] &lt; b[<span class="hljs-number">0</span>];<br>&#125;);<br><br><span class="hljs-comment">// sort greater 代表相反</span><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">cmp</span><span class="hljs-params">(T a, T b)</span> </span>&#123;<br>    <br>&#125;<br><br><span class="hljs-comment">// queue</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">cmp</span>&#123;<br>     <span class="hljs-comment">// bool operator()</span><br>     <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">const</span> pis &amp;a, <span class="hljs-type">const</span> pis &amp;b)</span> </span>&#123;<br>         <span class="hljs-comment">//...</span><br>     &#125;<br>&#125;<br><br><span class="hljs-comment">// cmp as function/lambda</span><br>priority_queue&lt;Foo, vector&lt;Foo&gt;, <span class="hljs-keyword">decltype</span>(cmp)&gt; <span class="hljs-built_in">que</span>(cmp);<br><span class="hljs-comment">// cmp as class</span><br>priority_queue&lt;Foo, vector&lt;Foo&gt;, Compare&gt; pq;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">myHash</span>&#123;<br>	<span class="hljs-function"><span class="hljs-type">size_t</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(Cell <span class="hljs-type">const</span>&amp; s)</span> <span class="hljs-type">const</span>  </span>&#123;<br>		<span class="hljs-keyword">return</span> (<span class="hljs-type">size_t</span>) (s.x * <span class="hljs-number">0x1f1f1f1f</span>) ^ s.y;<br>	&#125;<br>&#125;;<br><br><span class="hljs-comment">// this is const</span><br><span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>==(<span class="hljs-type">const</span> Pos&amp; otherPos) <span class="hljs-type">const</span><br>&#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>-&gt;row == otherPos.row &amp;&amp; <span class="hljs-keyword">this</span>-&gt;col == otherPos.col) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="io">I/O</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// getline</span><br><span class="hljs-comment">// !getline 前还有一个换行符</span><br>cin.<span class="hljs-built_in">get</span>();<br>string str;<br><span class="hljs-built_in">getline</span>(cin,str);<br><br><span class="hljs-comment">// 不定长</span><br><span class="hljs-keyword">if</span> (cin.<span class="hljs-built_in">get</span>() == <span class="hljs-string">&#x27;\n&#x27;</span>) <span class="hljs-keyword">break</span>;<br><br><span class="hljs-comment">// 提取信息</span><br><span class="hljs-built_in">sscanf</span>(str.<span class="hljs-built_in">c_str</span>(), <span class="hljs-string">&quot;%d is the root&quot;</span>, &amp;y);<br>    <br><span class="hljs-comment">// 输出</span><br><span class="hljs-comment">// 面对不能多余打印的内容 - 提前存储 - 后打印 </span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%05d\n&quot;</span>, val);<br><span class="hljs-comment">// 最少的总宽度 x2.12 + 展示符号</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%+05.2f\n&quot;</span>, val);<br><br><span class="hljs-comment">// conditional cout</span><br>cout &lt;&lt; x == <span class="hljs-number">1</span> ? <span class="hljs-string">&quot;a&quot;</span> : <span class="hljs-string">&quot;b&quot;</span> &lt;&lt; endl;<br><span class="hljs-comment">// string literal 索引 \n\0 (\0是默认的一位)</span><br>cout &lt;&lt; a[i] &lt;&lt; <span class="hljs-string">&quot; \n&quot;</span>[i == N - <span class="hljs-number">1</span>];<br><br><span class="hljs-comment">// interactive </span><br><span class="hljs-comment">// [] 为正则，表示出\n外的字符</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">char</span> str[<span class="hljs-number">20</span>];<br>    <span class="hljs-type">int</span> i;<br>    <span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">2</span>; i++) &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%[^\n]s&quot;</span>, str);<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s\n&quot;</span>, str);<br>        <span class="hljs-comment">// fflush(stdin);</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="内存分析">内存分析</h3>
<p>使用l r代替新增的数组 LCA</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function">node* <span class="hljs-title">build</span><span class="hljs-params">(vi &amp;a, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (l &gt; r) <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;<br>    node *head = <span class="hljs-keyword">new</span> <span class="hljs-built_in">node</span>(a[l]);<br>    <span class="hljs-type">int</span> ml = r + <span class="hljs-number">1</span>;<br>    <span class="hljs-built_in">rep</span> (i, l + <span class="hljs-number">1</span>, r + <span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-keyword">if</span> (a[i] &gt; a[<span class="hljs-number">0</span>]) &#123;<br>            ml = i;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br>    head-&gt;left = <span class="hljs-built_in">build</span>(a, l + <span class="hljs-number">1</span>, ml - <span class="hljs-number">1</span>);<br>    head-&gt;right = <span class="hljs-built_in">build</span>(a, ml, r);<br>    <span class="hljs-keyword">return</span> head;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="时间分析">时间分析</h3>
<p>总的合并次数 + 遍历次数</p>
<p>复杂度分析 - 随机变量的估计 ? random</p>
<p>200ms 3*n 三倍时间 == 超时</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 10**9</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;chrono&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std::chrono;<br>    <span class="hljs-keyword">auto</span> start = high_resolution_clock::<span class="hljs-built_in">now</span>();<br>	<span class="hljs-comment">// 10**9 视为1s</span><br>	<span class="hljs-comment">// ull 2s-6s(个人pc), oj 1-2s</span><br>	<span class="hljs-comment">// 10**18 = 10**9s; 3600s = 1h ...</span><br>    <span class="hljs-keyword">for</span> (ull i = <span class="hljs-number">1</span>; i &lt;= a; i++) &#123;<br>        res++;<br>    &#125;<br>    cout &lt;&lt; res &lt;&lt; endl;<br>    <span class="hljs-keyword">auto</span> stop = high_resolution_clock::<span class="hljs-built_in">now</span>();<br>    <span class="hljs-keyword">auto</span> duration = <span class="hljs-built_in">duration_cast</span>&lt;microseconds&gt;(stop - start);<br> <br>    cout &lt;&lt; <span class="hljs-string">&quot;Time taken by function: &quot;</span><br>         &lt;&lt; duration.<span class="hljs-built_in">count</span>() &lt;&lt; <span class="hljs-string">&quot; microseconds&quot;</span> &lt;&lt; endl;<br></code></pre></td></tr></table></figure>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/Algorithm/">Algorithm</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2023/02/07/hexo+/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">多设备更新博客</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/06/29/alrecord/">
                        <span class="hidden-mobile">算法练习记录</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  

  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  <script  src="/js/local-search.js" ></script>



  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  
    <script  src="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4/anchor.min.js" ></script>
  
  
    <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js" ></script>
  










  

  
    <!-- MathJax -->
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']]
        },
        loader: {
          load: ['ui/lazy']
        },
        options: {
          renderActions: {
            findScript: [10, doc => {
              document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
                const display = !!node.type.match(/; *mode=display/);
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
                const text = document.createTextNode('');
                node.parentNode.replaceChild(text, node);
                math.start = { node: text, delim: '', n: 0 };
                math.end = { node: text, delim: '', n: 0 };
                doc.math.push(math);
              });
            }, '', false],
            insertedScript: [200, () => {
              document.querySelectorAll('mjx-container').forEach(node => {
                let target = node.parentNode;
                if (target.nodeName.toLowerCase() === 'li') {
                  target.parentNode.classList.add('has-jax');
                }
              });
            }, '', false]
          }
        }
      };
    </script>

    <script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js" ></script>

  











<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
